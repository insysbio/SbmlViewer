webpackJsonp([1],{"4Npy":function(e,t){},CVcU:function(e,t){},KohE:function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\r\n\x3c!--\r\nCopyright 2016-2017 Institute for Systems Biology Moscow\r\n\r\n   Licensed under the Apache License, Version 2.0 (the "License");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an "AS IS" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n--\x3e\r\n\x3c!-- INFO\r\nDescription: Creating representation of whole sbml as systems of equations:\r\nmodes:\r\n  - idOrName\r\n  - math\r\n  - const/diff-init/differential-equations\r\n\r\nAuthor: Evgeny Metelkin\r\nCopyright: InSysBio LLC, 2016-2017\r\nLast modification: 2017-06-15\r\n\r\nProject-page: http://sv.insysbio.ru\r\n--\x3e\r\n<xsl:stylesheet version="1.0"\r\n  xmlns="http://www.w3.org/1999/xhtml"\r\n  xmlns:xhtml="http://www.w3.org/1999/xhtml"\r\n  xmlns:l2v1="http://www.sbml.org/sbml/level2"\r\n  xmlns:l2v2="http://www.sbml.org/sbml/level2/version2"\r\n  xmlns:l2v3="http://www.sbml.org/sbml/level2/version3"\r\n  xmlns:l2v4="http://www.sbml.org/sbml/level2/version4"\r\n  xmlns:l2v5="http://www.sbml.org/sbml/level2/version5"\r\n  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"\r\n  xmlns:mml="http://www.w3.org/1998/Math/MathML"\r\n  exclude-result-prefixes="mml l2v5 l2v4 l2v3 l2v2 l2v1">\r\n\r\n  \x3c!-- GLOBAL KEYS --\x3e\r\n  <xsl:key name="idKey" match="*" use="@id"/>\r\n  <xsl:key name="variableKey" match="*" use="@variable"/>\r\n\r\n  \x3c!-- PARAMETERS --\x3e\r\n  <xsl:param name="useNames">false</xsl:param> \x3c!-- use names instead of id in equations --\x3e\r\n  <xsl:param name="correctMathml">false</xsl:param> \x3c!-- use correction in MathML (for simbio) always on currently--\x3e\r\n  <xsl:param name="equationsOff">false</xsl:param> \x3c!-- do not show equations --\x3e\r\n\r\n  \x3c!-- top --\x3e\r\n  <xsl:template match="/">\r\n    <xsl:apply-templates mode="math"/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- SBML --\x3e\r\n  <xsl:template match="*[local-name()=\'sbml\']" mode="math">\r\n    <div class="sbml-element sbml-sbml sv-container sv-mode-math">\r\n      <h1 class="sv-header">SBML level <xsl:value-of select="@level"/> version <xsl:value-of select="@version"/></h1>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="*[local-name()=\'model\']" mode="math"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- model --\x3e\r\n  <xsl:template match="*[local-name()=\'model\']" mode="math">\r\n    <div class="sbml-element sbml-model sv-container">\r\n      <h2 class="sv-header">Model</h2>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*"/>\r\n\r\n        <xsl:if test="count(//*[local-name()=\'functionDefinition\'])">\r\n          <xsl:call-template name="functions"/>\r\n        </xsl:if>\r\n\r\n        <xsl:if test="count(\r\n          //*[local-name()=\'model\']/*/*[local-name()=\'parameter\'][not(key(\'variableKey\',@id))] |\r\n          //*[local-name()=\'compartment\'][not(key(\'variableKey\',@id))] |\r\n          //*[local-name()=\'species\' and @boundaryCondition=\'true\'][not(key(\'variableKey\',@id))]\r\n          )">\r\n          <xsl:call-template name="constants"/>\r\n        </xsl:if>\r\n\r\n        <xsl:if test="count(\r\n          //*[local-name()=\'assignmentRule\'] |\r\n          //*[local-name()=\'reaction\']\r\n          )">\r\n          <xsl:call-template name="explicit-rules"/>\r\n        </xsl:if>\r\n\r\n        <xsl:if test="count(//*[local-name()=\'algebraicRule\'])">\r\n          <xsl:call-template name="implicit-rules"/>\r\n        </xsl:if>\r\n\r\n        <xsl:if test="count(\r\n          //*[local-name()=\'species\' and not(@boundaryCondition=\'true\')] |\r\n          //*[local-name()=\'initialAssignment\']\r\n          )">\r\n          <xsl:call-template name="init"/>\r\n        </xsl:if>\r\n\r\n        <xsl:if test="count(\r\n          //*[local-name()=\'species\' and not(@boundaryCondition=\'true\')] |\r\n          //*[local-name()=\'rateRule\']\r\n          )">\r\n          <xsl:call-template name="differential-equations"/>\r\n        </xsl:if>\r\n\r\n        <xsl:if test="count(//*[local-name()=\'event\'])">\r\n          <xsl:call-template name="events"/>\r\n        </xsl:if>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- @attributes --\x3e\r\n  <xsl:template match="@*">\r\n    <p>\r\n      <xsl:attribute name="class">sbml-attribute sbml-<xsl:value-of select="local-name()"/> sv-container</xsl:attribute>\r\n      <span class="sbml-attribute-name"><xsl:value-of select="local-name()"/></span>: <span class="sbml-attribute-value"><xsl:value-of select="."/></span>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- idOrName mode --\x3e\r\n  <xsl:template match="@id" mode="idOrName">\r\n      <xsl:if test="$useNames=\'true\' and count(./../@name)>0">[<xsl:value-of select="./../@name"/>]</xsl:if>  \x3c!-- for simbio only--\x3e\r\n      <xsl:if test="$useNames=\'true\' and count(./../@name)=0">[no name]</xsl:if>\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="."/></xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- functions --\x3e\r\n  <xsl:template name="functions">\r\n    <div class="sbml-element sbml-listOf sbml-listOfFunctionDefinitions sv-container">\r\n      <h2 class="sv-header">Functions:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'functionDefinition\']"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'functionDefinition\']">\r\n    <p class="sbml-element sbml-functionDefinition sv-mml">\r\n      <math xmlns="http://www.w3.org/1998/Math/MathML">\r\n        <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n          <equivalent xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n            <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n                <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="@id" mode="idOrName"/></ci>\r\n                <xsl:copy-of select="mml:math/mml:lambda/mml:bvar/mml:*"/>\r\n            </apply>\r\n            <xsl:copy-of select="mml:math/mml:lambda/*[local-name()!=\'bvar\']"/>\r\n        </apply>\r\n      </math>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- constants --\x3e\r\n  <xsl:template name="constants">\r\n    <div class="sbml-mixed sv-container">\r\n      <h2 class="sv-header">Constants:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'model\']/*/*[local-name()=\'parameter\' and not(key(\'variableKey\',@id))]" mode="const"/>\r\n        <xsl:apply-templates select="//*[local-name()=\'compartment\' and not(key(\'variableKey\',@id))]" mode="const"/>\r\n        <xsl:apply-templates select="//*[local-name()=\'species\' and @boundaryCondition=\'true\' and not(key(\'variableKey\',@id))]" mode="const"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'parameter\']" mode="const">\r\n    <p class="sbml-element sbml-parameter">\r\n      <xsl:apply-templates select="@id" mode="idOrName"/>\r\n      = <xsl:value-of select="@value"/><xsl:if test="not(@value)">?</xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'compartment\']" mode="const">\r\n    <p class="sbml-element sbml-compartment">\r\n      <xsl:apply-templates select="@id" mode="idOrName"/>\r\n      = <xsl:value-of select="@size"/><xsl:if test="not(@size)">?</xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and @initialAmount]" mode="const">\r\n    <p class="sbml-element sbml-species">\r\n      <xsl:apply-templates select="@id" mode="idOrName"/> = <xsl:value-of select="@initialAmount"/><xsl:if test="@hasOnlySunstanceUnits!=\'true\'">/<xsl:value-of select="@compartment"/></xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and @initialConcentration]" mode="const">\r\n    <p class="sbml-element sbml-species">\r\n      <xsl:apply-templates select="@id" mode="idOrName"/> = <xsl:value-of select="@initialConcentration"/><xsl:if test="@hasOnlySunstanceUnits=\'true\'">*<xsl:value-of select="@compartment"/></xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- explicit rules --\x3e\r\n  <xsl:template name="explicit-rules">\r\n    <div class="sbml-mixed sv-container">\r\n      <h2 class="sv-header">Explicit rules:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'assignmentRule\']"/>\x3c!-- ???  --\x3e\r\n        <xsl:apply-templates select="//*[local-name()=\'reaction\']"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'assignmentRule\']">\r\n    <p class="sbml-element sbml-assignmentRule">\r\n      <xsl:if test="key(\'idKey\',@variable)"><xsl:apply-templates select="key(\'idKey\',@variable)/@id" mode="idOrName"/></xsl:if>\r\n      <xsl:if test="not(key(\'idKey\',@variable))"><span class="sv-id-lost"><xsl:value-of select="@variable"/></span></xsl:if>\r\n      = <xsl:apply-templates select="mml:math"/>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'reaction\']">\r\n    <p class="sbml-element sbml-reaction">\r\n      <xsl:apply-templates select="@id" mode="idOrName"/>\r\n      = <xsl:apply-templates select="*[local-name()=\'kineticLaw\']/mml:math"/>\r\n      <xsl:if test="*[local-name()=\'kineticLaw\']/*[local-name()=\'listOfParameters\']/*[local-name()=\'parameter\']">\r\n        <div class="sbml-element sbml-listOf sbml-listOfParameters sv-container">\r\n          <p>where</p>\r\n          <xsl:apply-templates select="*[local-name()=\'kineticLaw\']/*[local-name()=\'listOfParameters\']/*[local-name()=\'parameter\']" mode="const"/>\r\n        </div>\r\n      </xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- implicit rules --\x3e\r\n  <xsl:template name="implicit-rules">\r\n    <div class="sbml-mixed sv-container">\r\n      <h2 class="sv-header">Implicit rules:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'algebraicRule\']"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'algebraicRule\']">\r\n    <p class="sbml-element sbml-algebraicRule sv-container">\r\n      0 = <xsl:apply-templates select="mml:math"/>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- diff-init --\x3e\r\n  <xsl:template name="init">\r\n    <div class="sbml-mixed sv-container">\r\n      <h2 class="sv-header">Initiate at start:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'species\' and not(@boundaryCondition=\'true\')]" mode="diff-init"/>\r\n        <xsl:apply-templates select="//*[local-name()=\'initialAssignment\']" mode="diff-init"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'initialAssignment\']" mode="diff-init">\r\n    <p class="sbml-element sbml-initialAssignment sv-container">\r\n      <xsl:if test="key(\'idKey\',@symbol)"><xsl:apply-templates select="key(\'idKey\',@symbol)/@id" mode="idOrName"/></xsl:if>\r\n      <xsl:if test="not(key(\'idKey\',@symbol))"><span class="sv-id-lost"><xsl:value-of select="@symbol"/></span></xsl:if>\r\n      &#8592;\r\n      <xsl:apply-templates select="mml:math"/>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and not(@boundaryCondition=\'true\') and not(@hasOnlySubstanceUnits=\'true\')]" mode="diff-init">\r\n    <p class="sbml-element sbml-species sv-container">\r\n      <xsl:apply-templates select="@id" mode="idOrName"/> &#8592;\r\n      <xsl:if test="@initialConcentration">\r\n        <xsl:value-of select="@initialConcentration"/>\r\n      </xsl:if>\r\n      <xsl:if test="@initialAmount">\r\n        <xsl:value-of select="@initialAmount"/> / <xsl:apply-templates select="key(\'idKey\',@compartment)/@id" mode="idOrName"/>\r\n      </xsl:if>\r\n      <xsl:if test="not(@initialConcentration or @initialAmount)">?</xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'species\' and not(@boundaryCondition=\'true\') and @hasOnlySubstanceUnits=\'true\']" mode="diff-init">\r\n      <p class="sbml-element sbml-species sv-container">\r\n        <xsl:apply-templates select="@id" mode="idOrName"/> &#8592;\r\n            <xsl:if test="@initialAmount">\r\n              <xsl:value-of select="@initialAmount"/>\r\n            </xsl:if>\r\n            <xsl:if test="@initialConcentration">\r\n              <xsl:value-of select="@initialConcentration"/> &#8901; <xsl:apply-templates select="key(\'idKey\',@compartment)/@id" mode="idOrName"/>\r\n            </xsl:if>\r\n            <xsl:if test="not(@initialConcentration or @initialAmount)">?</xsl:if>\r\n      </p>\r\n    </xsl:template>\r\n\r\n  \x3c!-- differential-equations --\x3e\r\n  <xsl:template name="differential-equations">\r\n    <div class="sbml-mixed sv-container">\r\n      <h2 class="sv-header">Differential equations:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'species\' and not(@boundaryCondition=\'true\')]" mode="differential-equations"/>\r\n        <xsl:apply-templates select="//*[local-name()=\'rateRule\']" mode="differential-equations"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and not(@boundaryCondition=\'true\')]" mode="differential-equations">\r\n    <p class="sbml-element sbml-species sv-container">\r\n      (<xsl:if test="not(@hasOnlySubstanceUnits=\'true\')"><xsl:apply-templates select="key(\'idKey\',@compartment)/@id" mode="idOrName"/> &#8901; </xsl:if>\r\n        <xsl:apply-templates select="@id" mode="idOrName"/>)\' =\r\n      <math xmlns="http://www.w3.org/1998/Math/MathML">\r\n            <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n              <plus xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n              <xsl:apply-templates select="//*[local-name()=\'reaction\']/*/*[local-name()=\'speciesReference\' and @species=current()/@id]" mode="differential-equations"/>\r\n              <xsl:if test="count(//*[local-name()=\'reaction\']/*/*[local-name()=\'speciesReference\' and @species=current()/@id])=0"><cn xmlns="http://www.w3.org/1998/Math/MathML">0</cn></xsl:if>\r\n            </apply>\r\n      </math>\r\n    </p>\r\n  </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'listOfProducts\']/*[local-name()=\'speciesReference\' and not(@stoichiometry!=\'1\')]" mode="differential-equations">\r\n        <xsl:element name="ci" namespace="http://www.w3.org/1998/Math/MathML">\r\n          <xsl:apply-templates select="../../@id" mode="idOrName"/>\r\n        </xsl:element>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'listOfReactants\']/*[local-name()=\'speciesReference\' and not(@stoichiometry!=\'1\')]" mode="differential-equations">\r\n      <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n        <minus xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n        <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="../../@id" mode="idOrName"/></ci>\r\n      </xsl:element>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'listOfProducts\']/*[local-name()=\'speciesReference\' and @stoichiometry!=\'1\']" mode="differential-equations">\r\n      <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n        <times xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n        <cn xmlns="http://www.w3.org/1998/Math/MathML"><xsl:value-of select="@stoichiometry"/></cn>\r\n        <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="../../@id" mode="idOrName"/></ci>\r\n      </xsl:element>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'listOfReactants\']/*[local-name()=\'speciesReference\' and @stoichiometry!=\'1\']" mode="differential-equations">\r\n      \x3c!--<apply xmlns="http://www.w3.org/1998/Math/MathML">--\x3e\r\n      <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n        <minus xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n        <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n          <times xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n          <cn xmlns="http://www.w3.org/1998/Math/MathML"><xsl:value-of select="@stoichiometry"/></cn>\r\n          <ci xmlns="http://www.w3.org/1998/Math/MathML"> <xsl:apply-templates select="../../@id" mode="idOrName"/></ci>\r\n        </apply>\r\n      \x3c!--</apply>--\x3e\r\n      </xsl:element>\r\n    </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'rateRule\']" mode="differential-equations">\r\n    <p class="sbml-element sbml-rateRule sv-container">\r\n      (<xsl:value-of select="@variable"/>)\' =\r\n      <math xmlns="http://www.w3.org/1998/Math/MathML">\r\n          <xsl:apply-templates select="mml:math/mml:*"/>\r\n      </math>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- events --\x3e\r\n  <xsl:template name="events">\r\n    <div class="sbml-element sbml-listOf sbml-listOfEvents sv-container">\r\n      <h2 class="sv-header">Events:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'event\']"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'event\']">\r\n    <div class="sbml-element sbml-event sv-content">\r\n      When <xsl:apply-templates select="*[local-name()=\'trigger\']/mml:math"/>\r\n      <xsl:if test="*[local-name()=\'delay\']"> after delay <xsl:apply-templates select="*[local-name()=\'delay\']/mml:math"/></xsl:if>\r\n      <xsl:apply-templates select="*[local-name()=\'listOfEventAssignments\']/*[local-name()=\'eventAssignment\']"/>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'eventAssignment\']">\r\n    <p class="sbml-element sbml-eventAssignment sv-container">\r\n      <xsl:if test="key(\'idKey\',@variable)"><xsl:apply-templates select="key(\'idKey\',@variable)/@id" mode="idOrName"/></xsl:if>\r\n      <xsl:if test="not(key(\'idKey\',@variable))"><span class="sv-id-lost"><xsl:value-of select="@variable"/></span></xsl:if>\r\n      &#8592; <xsl:apply-templates select="mml:math"/>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- BEGIN OF mml --\x3e\r\n  \x3c!-- correct for max function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside max --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- correct for min function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside min --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- use id or names for equations and normalize space --\x3e\r\n  <xsl:template match="mml:ci">\r\n    <xsl:element name="ci" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:if test="$useNames=\'true\' and key(\'idKey\',normalize-space(text()))/@name">[<xsl:value-of select="key(\'idKey\',normalize-space(text()))/@name"/>]</xsl:if>\r\n      <xsl:if test="$useNames=\'true\' and not(key(\'idKey\',normalize-space(text()))/@name)">[no name]</xsl:if>\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="normalize-space(text())"/></xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- adaptation of e-notation for MathJax --\x3e\r\n  <xsl:template match="mml:cn[@type=\'e-notation\']">\r\n    <xsl:element name="cn" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:copy-of select="normalize-space(text()[1])"/><xsl:if test="normalize-space(text()[2])!=\'0\'">e<xsl:copy-of select="normalize-space(text()[2])"/>\r\n      </xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- adaptation of integer for MathJax --\x3e\r\n  <xsl:template match="mml:cn[@type=\'integer\']">\r\n    <xsl:element name="cn" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:copy-of select="normalize-space(text())"/>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- just copy mml or not --\x3e\r\n  <xsl:template match="mml:math">\r\n    <xsl:if test="$equationsOff=\'true\'">= Equations are hidden =</xsl:if>\r\n    <xsl:if test="not($equationsOff=\'true\')">\r\n      <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="mml:*">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n</xsl:stylesheet>\r\n'},MQMm:function(e,t){},NHnr:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l("7+uW"),s=l("fZjL"),a=l.n(s),r={name:"ToolBar",props:["TTList","ListTTParametrs","stateTTparametrs","currentTTName","fileName"],data:function(){return{isSpin:!1,file:null}},mounted:function(){var e=this;this.$root.$on("startSpin",function(){e.isSpin=!0}),this.$root.$on("stopSpin",function(){e.isSpin=!1}),this.dragNdropInit(),document.title=this.fileName},methods:{onRefresh:function(){var e=this;this.isSpin=!0,this.$nextTick(function(){e.$emit("onOpenFile",e.file,!0)})},onChooseFileInput:function(e){var t=this;e.preventDefault();var l=document.getElementById("file").files[0];l&&(this.file=l,this.isSpin=!0,this.$nextTick(function(){t.$emit("onOpenFile",l)}))},toogleParam:function(e){this.stateTTparametrs[e]=!this.stateTTparametrs[e]},onSelectTT:function(){var e=this;this.isSpin=!0,this.$nextTick(function(){e.$emit("onChangeTT",e.currentTTName)})},dragNdropInit:function(){var e=this;document.addEventListener("dragover",function(e){e.preventDefault()}),document.addEventListener("dragstart",function(e){e.preventDefault()}),document.addEventListener("drop",function(t){t.preventDefault();var l=e.file=t.dataTransfer.files[0];e.$emit("onOpenFile",l)})}}},m={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"w3-top w3-card-4 w3-blue-grey",attrs:{id:"tool-bar"}},[l("div",{attrs:{id:"optionsArea"}},[l("div",{staticStyle:{float:"left"}},[l("div",{staticClass:"sv-cell w3-padding w3-border-color-white"},[l("input",{staticClass:"file",attrs:{id:"file",type:"file",accept:".xml,.sbml"},on:{change:e.onChooseFileInput}}),l("span",{staticClass:"w3-padding-bottom",attrs:{id:"fileName"}},[e._v(e._s(e.fileName))])]),e._v(" "),0!==Object.keys(e.TTList).length?l("div",{staticClass:"sv-cell w3-border-left w3-border-color-white w3-padding-left w3-padding-right"},[l("select",{directives:[{name:"model",rawName:"v-model",value:e.currentTTName,expression:"currentTTName"}],attrs:{id:"transformationType"},on:{change:[function(t){var l=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.currentTTName=t.target.multiple?l:l[0]},e.onSelectTT]}},e._l(e.TTList,function(t,n){return l("option",{domProps:{value:t.name}},[e._v(e._s(t.name))])}))]):e._e(),e._v(" "),0!==Object.keys(e.ListTTParametrs).length?l("div",{staticClass:"sv-cell w3-padding w3-border-left",attrs:{id:"listOptionsCheckbox"}},e._l(e.ListTTParametrs,function(t){return l("div",{staticClass:"sv-cell w3-padding-right w3-tooltip"},[l("p",[l("input",{attrs:{id:t,type:"checkbox"},domProps:{checked:e.stateTTparametrs[t]},on:{change:function(l){e.toogleParam(t)}}}),e._v(" "),l("label",{attrs:{for:t}},[e._v(e._s(t))])]),e._v(" "),l("p",{staticClass:"w3-text w3-tag w3-tiny w3-animate-opacity noteOptions"},[e._v("\r\n            "+e._s(e.TTList.find(function(t){return t.name===e.currentTTName}).parameterNotes[t])+"\r\n          ")])])})):e._e(),e._v(" "),e.currentTTName?l("div",{staticClass:"w3-container sv-cell w3-padding w3-border-left w3-border-color-white"},[l("div",{staticClass:"w3-btn w3-blue-grey w3-circle w3-ripple",staticStyle:{"margin-top":"-5px"},attrs:{id:"refresh"},on:{click:e.onRefresh}},[l("i",{staticClass:"w3-xlarge",class:{"w3-spin":e.isSpin,"sv-icon-spinner":e.isSpin,"sv-icon-refresh":!e.isSpin},attrs:{id:"spinner"}})])]):e._e()]),e._v(" "),e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w3-container sv-cell w3-padding",staticStyle:{float:"right",padding:"20px!important"}},[t("a",{attrs:{href:"http://sv.insysbio.com"}},[this._v("http://sv.insysbio.com")])])}]};var i=l("VU/8")(r,m,!1,function(e){l("4Npy")},null,null).exports;n.a.directive("dom",{bind:function(e,t,l){e.children&&e.children[0]&&e.removeChild(e.children[0]),t.value&&e.appendChild(t.value)},update:function(e,t,l){e.children&&e.children[0]&&e.removeChild(e.children[0]),t.value&&e.appendChild(t.value)}});var o=l("0mG3"),c=l("sUnl").pd;function p(e){for(var t=document.getElementById(e).getElementsByClassName("sv-raw-xml"),l=0;l<t.length;l++){var n=t[l].innerHTML;t[l].innerHTML=o(c.xml(n))}window.PR.prettyPrint()}var x=new window.DOMParser,d=l("pQeK")(x)[2].xslt,f={name:"AnnotationSide",props:["fileContent"],data:function(){return{content:null,xsltProcessor:null}},mounted:function(){this.xsltProcessor=new XSLTProcessor,this.xsltProcessor.importStylesheet(d.firstElementChild),this.$root.$on("onOpenAnnotation",this.openAnnotation);var e=-1!==navigator.userAgent.search("Edge");this.xsltProcessor.setParameter(null,"isEdge",e)},methods:{openAnnotation:function(e){this.xsltProcessor.setParameter(null,"elementId",e);try{var t=this.xsltProcessor.transformToFragment(this.fileContent,document);this.content=t.children[0],this.$nextTick(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub]),p("sidebarContent")})}catch(e){console.log(e)}},onAnnotationClose:function(){this.$emit("closeAnnotation")}}},h={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"w3-container"},[l("button",{staticClass:"w3-blue-grey w3-button w3-circle w3-large close-sidebar-btn",on:{click:e.onAnnotationClose}},[e._v(">")]),e._v(" "),e.content?e._e():l("div",[e._v("Nothing display")]),e._v(" "),l("div",{directives:[{name:"dom",rawName:"v-dom",value:e.content,expression:"content"}],staticClass:"w3-border-left",attrs:{id:"sidebarContent"}})])},staticRenderFns:[]};var u=l("VU/8")(f,h,!1,function(e){l("zO55")},null,null).exports,v={name:"ErrorContainer",data:function(){return{errorMessage:null,errorDictionary:l("ys3j")}},mounted:function(){var e=this;this.$root.$on("onThrowError",function(t){e.displayErr(e.errorDictionary[t].message)}),this.$root.$on("onClearErr",this.clear)},methods:{displayErr:function(e){this.errorMessage=e},clear:function(){this.errorMessage=null}}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.errorMessage,expression:"errorMessage"}],staticClass:"w3-row",attrs:{id:"errorContainer"}},[t("div",{staticClass:"w3-panel w3-col l12 m12 s12 w3-text-red w3-center w3-large w3-padding",attrs:{id:"errorMess"}},[this._v("\r\n    "+this._s(this.errorMessage)+"\r\n  ")])])},staticRenderFns:[]};var y=l("VU/8")(v,b,!1,function(e){l("gir7")},null,null).exports;l("4yPH");function w(){console.log("size");var e=document.getElementById("optionsArea").clientHeight+15+"px";document.getElementById("content").style.marginTop=e;var t=document.getElementById("sidebarContent");t&&(t.style.top=4*parseInt(e)+"px",t.style.height=document.documentElement.clientHeight-document.getElementById("optionsArea").clientHeight-7+"px");var l=document.getElementById("mainContent");l&&(l.style.height=document.documentElement.clientHeight-document.getElementById("optionsArea").clientHeight-14+"px")}var g={name:"ModelArea",props:["displayContent","fileContent"],data:function(){return{isSideOpen:!1}},components:{AnnotationSide:u,ErrorContainer:y},mounted:function(){var e=this;this.$root.$on("resetContent",function(){e.isSideOpen=!1,setTimeout(function(){e.$nextTick(function(){e.addEventListenerAnnotationElement(),MathJax.Hub.Queue(["Typeset",MathJax.Hub]),p("mainContent")})},100)}),w(),window.addEventListener("resize",w)},methods:{addEventListenerAnnotationElement:function(){var e=this;this.$nextTick(function(){w();for(var t=document.querySelectorAll(".sbml-id[id]"),l=0;l<t.length;l++)t[l].addEventListener("click",function(t){e.isSideOpen=!0;var l=document.getElementById("mainContent").firstElementChild;e.$root.$emit("onOpenAnnotation",t.target.id,l)});for(var n=document.querySelectorAll("tr.sv-hidden"),s=function(e){var t=n[e],l=document.createElement("i");l.setAttribute("class","sv-hide-button sv-info-symbol"),t.previousSibling.firstElementChild.appendChild(l),l.addEventListener("click",function(){t.classList.toggle("sv-hidden")})},a=0;a<n.length;a++)s(a)})}},watch:{displayContent:function(){this.isSideOpen=!1}}},M={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"content"}},[l("ErrorContainer",{staticClass:"sv-full-width"}),e._v(" "),l("div",{staticClass:"sv-full-width",attrs:{id:"container"}},[e.displayContent?l("div",{directives:[{name:"dom",rawName:"v-dom",value:e.displayContent,expression:"displayContent"}],staticClass:"w3-container w3-border-color-blue-grey",class:{"main-container-part":e.isSideOpen},attrs:{id:"mainContent"}}):e._e(),e._v(" "),e.displayContent?e._e():l("div",{staticClass:"w3-container w3-center w3-large w3-text-grey w3-margin"},[e._v("Drug'n'drop SBML file here.")]),e._v(" "),l("AnnotationSide",{directives:[{name:"show",rawName:"v-show",value:e.isSideOpen,expression:"isSideOpen"}],staticClass:"side-container",attrs:{fileContent:e.fileContent},on:{closeAnnotation:function(t){e.isSideOpen=!1}}})],1)],1)},staticRenderFns:[]};var O=l("VU/8")(g,M,!1,function(e){l("TM+8")},null,null).exports;var L=new window.DOMParser,T=l("pQeK")(L),N={name:"App",data:function(){return{TTList:{},currentTTName:null,currentTT:{},ListTTParametrs:{},stateTTparametrs:{},fileUrl:null,fileName:"No file selected.",displayContent:null,fileContent:""}},mounted:function(){var e=this;this.checkFileByURL()&&(this.$root.$emit("startSpin"),this.$nextTick(function(){e.loadFile()}))},components:{ToolBar:i,ModelArea:O},methods:{loadFile:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&this.fileUrl&&(this.fileUrl=null),this.$root.$emit("onClearErr"),l||(this.currentTTName=null,this.stateTTparametrs={}),this.currentTT={},this.ListTTParametrs={},this.readFile(e,function(e){t.fileContent=e,t.getTTData(e)&&t.setDataForDisplay(e),t.$root.$emit("stopSpin")})},readFile:function(e,t){var l=this;if(this.fileUrl){this.fileName=this.fileUrl.match(/[_-\w]+.xml/)[0];var n=new XMLHttpRequest;n.open("GET",this.fileUrl,!0),n.send(),n.onreadystatechange=function(){200===n.status&&4===n.readyState&&t(n.responseXML),200!==n.status&&0!==n.status&&l.$root.$emit("onThrowError","Can not read file")}}else this.fileName=e.name,function(e,t){var l=new FileReader;l.onload=function(){try{var e=(new DOMParser).parseFromString(l.result,"application/xml");t(null,e)}catch(e){t(e,null)}},l.readAsText(e)}(e,function(e,n){e&&l.$root.$emit("onThrowError","Can not read file"),t(n)})},getTTData:function(e){var t=this;return this.TTList=this.getListTT(e),0!==a()(this.TTList).length?(this.currentTT=this.getCurrentTT(),this.ListTTParametrs=this.TTList.find(function(e){return e.name===t.currentTTName}).parameters,this.setStateTTParametrs(),!0):(this.$root.$emit("onThrowError","Incorrect level"),!1)},setDataForDisplay:function(e){var t=this;this.displayContent=null,this.$nextTick(function(){var l,n=t.transformDocument(e,t.currentTT.xslt),s=n&&n.children[0].outerHTML;if(!n||(l=s).match(/= \?\?\?/)||l.match(/This page contains the following errors/))return t.$root.$emit("onThrowError","Incorrect XML"),!1;t.$root.$emit("resetContent"),t.displayContent=n.children[0]})},checkFileByURL:function(){var e=window.location.search.substring(1).split("&");return 0!==e.length&&""!==e[0]?(this.fileUrl=e[0],!0):(this.fileUrl=null,!1)},getListTT:function(e){var t=e.getElementsByTagName("sbml"),l=t&&t[0]&&t[0].getAttribute("level");return l?T.filter(function(e){return e.level===l&&"sbml2element"!==e.name&&"sbml3element"!==e.name}):(this.$root.$emit("onThrowError","Incorrect level"),{})},getCurrentTT:function(){var e=this;return this.currentTTName?this.TTList.filter(function(t){return t.name===e.currentTTName})[0]||this.TTList[0]:(this.currentTTName=this.TTList[0].name,this.TTList[0])},setStateTTParametrs:function(){var e=this;0!==a()(this.ListTTParametrs).length?this.ListTTParametrs.forEach(function(t,l){e.stateTTparametrs[t]=e.stateTTparametrs&&e.stateTTparametrs[t]||!1}):this.stateTTparametrs={}},transformDocument:function(e,t){try{var l=new XSLTProcessor;l.importStylesheet(t),l.setParameter(null,"transform",this.currentTT.name),l.setParameter(null,"transform2","sbml"+this.currentTT.level+"element");var n=this.ListTTParametrs;for(var s in n){var a=n[s];l.setParameter(null,a,this.stateTTparametrs[a])}return l.transformToFragment(e,document)}catch(e){return this.$root.$emit("onThrowError","Fail transform document"),console.log(e),null}},toogleTT:function(e){this.currentTTName=e,this.getTTData(this.fileContent)&&this.setDataForDisplay(this.fileContent),this.$root.$emit("stopSpin")}},watch:{fileName:function(e,t){document.title=e}}};var C={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"app"}},[l("ToolBar",{attrs:{fileName:e.fileName,currentTTName:e.currentTTName,TTList:e.TTList,ListTTParametrs:e.ListTTParametrs,stateTTparametrs:e.stateTTparametrs},on:{onOpenFile:e.loadFile,onChangeTT:e.toogleTT}}),e._v(" "),l("ModelArea",{attrs:{displayContent:e.displayContent,fileContent:e.fileContent}})],1)},staticRenderFns:[]};var S=l("VU/8")(N,C,!1,function(e){l("MQMm"),l("Ubdk"),l("wpwt"),l("CVcU")},null,null).exports;n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:S},template:"<App/>"})},QrHG:function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\r\n\x3c!--\r\nCopyright 2016-2017 Institute for Systems Biology Moscow\r\n\r\n   Licensed under the Apache License, Version 2.0 (the "License");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an "AS IS" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n--\x3e\r\n\x3c!-- INFO\r\nDescription: Creating representation of whole sbml in table format\r\nmodes:\r\n  - table\r\n  - reactionFormula\r\n  - idOrName\r\n  - unitFormula/unitFormulaScale\r\n  - link/no-link\r\n  - element\r\n\r\nAuthor: Evgeny Metelkin\r\nCopyright: InSysBio LLC, 2016-2018\r\n\r\nProject-page: http://sv.insysbio.com\r\n--\x3e\r\n<xsl:stylesheet version="1.0"\r\n  xmlns="http://www.w3.org/1999/xhtml"\r\n  xmlns:xhtml="http://www.w3.org/1999/xhtml"\r\n  xmlns:l3v1="http://www.sbml.org/sbml/level3/version1/core"\r\n  xmlns:l3v2="http://www.sbml.org/sbml/level3/version2/core"\r\n  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"\r\n  xmlns:mml="http://www.w3.org/1998/Math/MathML"\r\n  exclude-result-prefixes="mml xhtml l3v1 l3v2">\r\n\r\n  \x3c!-- GLOBAL KEYS --\x3e\r\n  <xsl:key name="idKey" match="*" use="@id"/>\r\n  <xsl:key name="variableKey" match="*" use="@variable"/>\r\n\r\n  \x3c!-- PARAMETERS --\x3e\r\n  <xsl:param name="useNames">false</xsl:param> \x3c!-- use names instead of id in equations --\x3e\r\n  <xsl:param name="correctMathml">false</xsl:param> \x3c!-- use correction in MathML (for simbio) always on currently--\x3e\r\n  <xsl:param name="equationsOff">false</xsl:param> \x3c!-- do not show equations --\x3e\r\n\r\n  \x3c!-- top --\x3e\r\n  <xsl:template match="/">\r\n    <xsl:apply-templates mode="table"/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- SBML --\x3e\r\n  <xsl:template match="*[local-name()=\'sbml\']" mode="table">\r\n    <div class="sbml-element sbml-sbml sv-container sv-mode-table">\r\n      <h1 class="sv-header">SBML level <xsl:value-of select="@level"/> version <xsl:value-of select="@version"/></h1>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'model\']" mode="table"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- model --\x3e\r\n  <xsl:template match="*[local-name()=\'model\']" mode="table">\r\n    <div class="sbml-element sbml-model sv-container">\r\n      <h2 class="sv-header">Model</h2>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <xsl:apply-templates select="*[contains(local-name(), \'listOf\')]" mode="table"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'annotation\']" mode="element">\r\n    <div class="sbml-element sbml-annotation sv-container">\r\n      <p class="sv-header sbml-element-name">Annotation</p>\r\n      <pre class="sv-content sv-raw-xml prettyprint"><xsl:copy-of select="node()"/></pre>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- notes --\x3e\r\n  <xsl:template match="*[local-name()=\'notes\']" mode="element">\r\n    <div class="sbml-element sbml-notes sv-container">\r\n      <p class="sv-header sbml-element-name">Notes</p>\r\n      <div class="sv-content sv-xhtml">\r\n        <xsl:copy-of select="node()"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n\x3c!--\r\n  <xsl:template match="*[local-name()=\'notes\' and xhtml:body]" mode="element">\r\n   <p><strong>notes:</strong></p>\r\n   <div class="note-content">\r\n    <xsl:copy-of select="xhtml:body/node()"/>\r\n   </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'notes\' and xhtml:html[xhtml:body]]" mode="element">\r\n   <p><strong>notes:</strong></p>\r\n   <div class="note-content">\r\n    <xsl:copy-of select="xhtml:html/xhtml:body/node()"/>\r\n   </div>\r\n  </xsl:template>\r\n--\x3e\r\n\r\n  \x3c!-- @attributes --\x3e\r\n  <xsl:template match="@*" mode="element">\r\n    <p>\r\n      <xsl:attribute name="class">sbml-attribute sbml-<xsl:value-of select="local-name()"/> sv-container</xsl:attribute>\r\n      <span class="sbml-attribute-name"><xsl:value-of select="local-name()"/></span>: <span class="sbml-attribute-value"><xsl:value-of select="."/></span>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- id --\x3e\r\n  <xsl:template match="@id" mode="link">\r\n    <span class="sbml-attribute-value sbml-id">\r\n      <xsl:attribute name="id"><xsl:value-of select="."/></xsl:attribute>\r\n      <xsl:value-of select="."/>\r\n    </span>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="@id" mode="no-link">\r\n    <span class="sbml-attribute-value sbml-id">\r\n      <xsl:value-of select="."/>\r\n    </span>\r\n  </xsl:template>\r\n\r\n\t\x3c!-- SId object: internal ref --\x3e\r\n  <xsl:template\r\n    match="@species\r\n      |@substanceUnits\r\n      |@units\r\n      |@compartment\r\n      |@outside\r\n      |@symbol\r\n      |@variable">\r\n    <xsl:if test="not(key(\'idKey\',.))">\r\n      <span>\r\n        <xsl:attribute name="class">sbml-attribute-value sbml-<xsl:value-of select="local-name()"/> sbml-id-lost</xsl:attribute>\r\n        <xsl:value-of select="."/>\r\n      </span>\r\n    </xsl:if>\r\n\r\n    <xsl:if test="key(\'idKey\',.)">\r\n      <span>\r\n        <xsl:attribute name="class">sbml-attribute-value sbml-<xsl:value-of select="local-name()"/> sbml-id-ref</xsl:attribute>\r\n        <xsl:apply-templates select="key(\'idKey\',.)/@id" mode="idOrName"/>\r\n      </span>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfFunctionDefinitions --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfFunctionDefinitions\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfFunctionDefinitions sv-container">\r\n      <h3 class="sv-header">listOfFunctionDefinitions:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th>math</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'functionDefinition\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'functionDefinition\']" mode="table">\r\n      <tr class="sbml-element sbml-functionDefinition">\r\n        <td><xsl:apply-templates select="@id" mode="no-link"/></td>\r\n        <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n        <td class="sbml-attribute-value sbml-metaid"><xsl:apply-templates select="@metaid" mode="table"/></td>\r\n        <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n      </tr>\r\n      <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n      <tr class="sbml-mixed sv-hidden">\r\n        <td colspan="4">\r\n          <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n          <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        </td>\r\n      </tr>\r\n      </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfUnitDefinitions --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfUnitDefinitions\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfUnitDefinitions sv-container">\r\n      <h3 class="sv-header">listOfUnitDefinitions:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n        <tr>\r\n          <th>id</th>\r\n          <th><xsl:if test="*/@name">name</xsl:if></th>\r\n          <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n          <th>listOfUnits</th>\r\n        </tr>\r\n        <xsl:apply-templates select="*[local-name()=\'unitDefinition\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'unitDefinition\']" mode="table">\r\n      <tr class="sbml-element sbml-unitDefinition">\r\n        <td><xsl:apply-templates select="@id" mode="no-link"/></td>\r\n        <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n        <td class="sbml-attribute-value sbml-metaid"><xsl:apply-templates select="@metaid" mode="table"/></td>\r\n        <td class="sbml-listOf sbml-listOfUnitDefinition"><xsl:apply-templates select="*[local-name()=\'listOfUnits\']" mode="unitFormula"/></td>\r\n      </tr>\r\n      <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n      <tr class="sbml-mixed sv-hidden">\r\n        <td colspan="4">\r\n          <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n          <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        </td>\r\n      </tr>\r\n      </xsl:if>\r\n  </xsl:template>\r\n\r\n\x3c!-- listOfCompartments --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfCompartments\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfCompartments sv-container">\r\n      <h3 class="sv-header">listOfCompartments:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table class="sv-listof-table">\r\n        <tr>\r\n          <th>id</th>\r\n          <th><xsl:if test="*/@name">name</xsl:if></th>\r\n          <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n          <th><xsl:if test="*/@units">units</xsl:if></th>\r\n          <th><xsl:if test="*/@size">size</xsl:if></th>\r\n        </tr>\r\n        <xsl:apply-templates select="*[local-name()=\'compartment\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'compartment\']" mode="table">\r\n      <tr class="sbml-element sbml-compartment">\r\n        <td><xsl:apply-templates select="@id" mode="link"/></td>\r\n        <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n        <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n        <td class="sbml-attribute-value sbml-units"><xsl:apply-templates select="@units"/></td>\r\n        <td class="sbml-attribute-value sbml-size"><xsl:value-of select="@size"/></td>\r\n      </tr>\r\n      <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n      <tr class="sbml-mixed sv-hidden">\r\n        <td colspan="7">\r\n          <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n          <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        </td>\r\n      </tr>\r\n      </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfSpecies --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfSpecies\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfSpecies sv-container">\r\n      <h3 class="sv-header">listOfSpecies:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th><xsl:if test="*/@substanceUnits">substance Units</xsl:if></th>\r\n            <th><xsl:if test="*/@hasOnlySubstanceUnits">hasOnly Substance Units</xsl:if></th>\r\n            <th><xsl:if test="*/@initialConcentration">initial Concentration</xsl:if></th>\r\n            <th><xsl:if test="*/@initialAmount">initial Amount</xsl:if></th>\r\n            <th><xsl:if test="*/@boundaryCondition">boundary Condition</xsl:if></th>\r\n            <th><xsl:if test="*/@compartment">compartment</xsl:if></th>\r\n            <th><xsl:if test="*/@conversionFactor">conversion factor</xsl:if></th>\r\n            <th><xsl:if test="*/@constant">constant</xsl:if></th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'species\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\']" mode="table">\r\n    <tr class="sbml-element sbml-species">\r\n      <td><xsl:apply-templates select="@id" mode="link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-attribute-value sbml-substanceUnits"><xsl:apply-templates select="@substanceUnits"/></td>\r\n      <td class="sbml-attribute-value sbml-hasOnlySubstanceUnits"><xsl:value-of select="@hasOnlySubstanceUnits"/></td>\r\n      <td class="sbml-attribute-value sbml-initialConcentration"><xsl:value-of select="@initialConcentration"/></td>\r\n      <td class="sbml-attribute-value sbml-initialAmount"><xsl:value-of select="@initialAmount"/></td>\r\n      <td class="sbml-attribute-value sbml-boundaryCondition"><xsl:value-of select="@boundaryCondition"/></td>\r\n      <td class="sbml-attribute-value sbml-compartment"><xsl:apply-templates select="@compartment"/></td>\r\n      <td class="sbml-attribute-value sbml-conversationFactor"><xsl:value-of select="@conversionFactor"/></td>\r\n      <td class="sbml-attribute-value sbml-constant"><xsl:value-of select="@constant"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="11">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfParameters --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfParameters\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfParameters sv-container">\r\n      <h3 class="sv-header">listOfParameters:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th><xsl:if test="*/@units">units</xsl:if></th>\r\n            <th><xsl:if test="*/@value">value</xsl:if></th>\r\n            <th><xsl:if test="*/@constant">constant</xsl:if></th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'parameter\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'parameter\']" mode="table">\r\n    <tr class="sbml-element sbml-parameter">\r\n      <td><xsl:apply-templates select="@id" mode="link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-attribute-value sbml-units"><xsl:apply-templates select="@units"/></td>\r\n      <td class="sbml-attribute-value sbml-value"><xsl:value-of select="@value"/></td>\r\n      <td class="sbml-attribute-value sbml-constant"><xsl:value-of select="@constant"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="5">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfInitialAssignments annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfInitialAssignments\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfInitialAssignments sv-container">\r\n      <h3 class="sv-listof-header">listOfInitialAssignments:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th>name</th>\r\n            <th>sboTerm</th>\r\n            <th>symbol</th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th>math:</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'initialAssignment\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'initialAssignment\']" mode="table">\r\n    <tr class="sbml-element sbml-initialAssignment">\r\n      <td><xsl:apply-templates select="@id"/></td>\r\n      <td><xsl:apply-templates select="@name"/></td>\r\n      <td><xsl:apply-templates select="@sboTerm"/></td>\r\n      <td><xsl:apply-templates select="@symbol"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="3">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfConstraints annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfConstraints\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfConstraints sv-container">\r\n      <h3 class="sv-header">listOfConstraints:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n        <tr>\r\n          <th><xsl:if test="*/@id">id</xsl:if></th>\r\n          <th><xsl:if test="*/@name">name</xsl:if></th>\r\n          <th><xsl:if test="*/@sboTerm">sboTerm</xsl:if></th>\r\n          <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n          <th><xsl:if test="*/*[local-name()=\'message\']">message</xsl:if></th>\r\n          <th>math:</th>\r\n        </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'constraint\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'constraint\']" mode="table">\r\n    <tr class="sbml-element sbml-constraint">\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@id"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@sboTerm"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-element sbml-message"><xsl:apply-templates select="*[local-name()=\'message\']" mode="table"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="3">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfRules annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfRules\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfRules sv-container">\r\n      <h3 class="sv-header">listOfRules:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n        <tr>\r\n    \t    <th>id</th>\r\n    \t    <th>name</th>\r\n    \t    <th>sboTerm</th>\r\n    \t    <th>type</th>\r\n          <th>variable</th>\r\n          <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n          <th>math:</th>\r\n        </tr>\r\n        <xsl:apply-templates select="*[local-name()=\'assignmentRule\'] | *[local-name()=\'algebraicRule\'] | *[local-name()=\'rateRule\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'assignmentRule\']\r\n    |*[local-name()=\'algebraicRule\']\r\n    |*[local-name()=\'rateRule\']" mode="table">\r\n    <tr>\r\n      <xsl:attribute name="class">sbml-element sbml-<xsl:value-of select="local-name()"/></xsl:attribute>\r\n      <td><xsl:value-of select="@id"/></td>\r\n      <td><xsl:value-of select="@name"/></td>\r\n      <td><xsl:value-of select="@sboTerm"/></td>\r\n      <td><xsl:value-of select="local-name()"/></td>\r\n      <td><xsl:apply-templates select="@variable"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="4">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfReactions annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfReactions\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfReactions sv-container">\r\n      <h3 class="sv-header">listOfReactions:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th>reactants/products:</th>\r\n            <th><xsl:if test="*/*[local-name()=\'listOfModifiers\']">modifiers:</xsl:if></th>\r\n            <th>math:</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'reaction\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'reaction\']" mode="table">\r\n    <tr class="sbml-element sbml-functionDefinition">\r\n      <td><xsl:apply-templates select="@id" mode="link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-mixed"><xsl:apply-templates select="." mode="reactionFormula"/></td>\r\n      <td class="sbml-listOf sbml-listOfModifiers"><xsl:apply-templates select="*[local-name()=\'listOfModifiers\']" mode="reactionFormula"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="*[local-name()=\'kineticLaw\']/mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']|*[local-name()=\'kineticLaw\']/*[local-name()=\'listOfParameters\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="6">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'kineticLaw\']/*[local-name()=\'listOfParameters\']" mode="table"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfEvents annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfEvents\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfEvents sv-container">\r\n      <h3 class="sv-header">listOfEvents:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@name">sboTerm</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th><xsl:if test="*/@useValuesFromTriggerTime">useValuesFrom TriggerTime</xsl:if></th>\r\n            <th>trigger</th>\r\n            <th>delay</th>\r\n            <th>priority</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'event\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'event\']" mode="table">\r\n    <tr class="sbml-element sbml-event">\r\n      <td><xsl:apply-templates select="@id" mode="no-link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-sboTerm"><xsl:value-of select="@sboTerm"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-attribute-value sbml-useValuesFromTriggerTime"><xsl:value-of select="@useValuesFromTriggerTime"/></td>\r\n      <td class="sbml-element sbml-trigger sbml-math sv-mml"><xsl:apply-templates select="*[local-name()=\'trigger\']" mode="table"/></td>\r\n      <td class="sbml-element sbml-delay sbml-math sv-mml"><xsl:apply-templates select="*[local-name()=\'delay\']" mode="table"/></td>\r\n      <td class="sbml-element sbml-priority"><xsl:apply-templates select="@priority"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']\r\n      |./*[local-name()=\'annotation\']\r\n      |*[local-name()=\'listOfEventAssignments\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="6">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'listOfEventAssignments\']" mode="table"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'trigger\']" mode="table">\r\n    <xsl:apply-templates select="mml:math"/>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'delay\']" mode="table">\r\n    <xsl:apply-templates select="mml:math"/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfEventAssignments annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfEventAssignments\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfEventAssignments sv-container">\r\n      <h3 class="sv-header">listOfEventAssignments:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>variable</th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th>math:</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'eventAssignment\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'eventAssignment\']" mode="table">\r\n    <tr class="sbml-element sbml-eventAssignment">\r\n      <td><xsl:apply-templates select="@variable"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="3">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'unitDefinition\']/@name" mode="table">\r\n    <xsl:value-of select="."/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- message type: just copy --\x3e\r\n  <xsl:template match="*[local-name()=\'message\']" mode="table">\r\n    <xsl:copy-of select="node()"/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- do nothing if nothing to output--\x3e\r\n  <xsl:template match="*" mode="table">\r\n    = missing in xslt: <xsl:value-of select="local-name()"/>=\r\n  </xsl:template>\r\n\r\n\x3c!-- END OF table mode --\x3e\r\n\r\n\x3c!-- BEGIN OF unitFormula/unitFormulaScale mode --\x3e\r\n  \x3c!-- ???  <xsl:template match="l2v2:listOfUnits\r\n      | l2v3:listOfUnits\r\n      | l2v4:listOfUnits\r\n      | l2v5:listOfUnits" mode="unitFormula">\r\n      <xsl:apply-templates select="*[local-name()=\'unit\']" mode="unitFormula"/>\r\n    </xsl:template> --\x3e\r\n\r\n    <xsl:template match="*[local-name()=\'unit\' and @exponent!=\'1\']" mode="unitFormula">\r\n        (<xsl:if test="@multiplier!=\'1\'"><xsl:value-of select="@multiplier"/>&#8901;</xsl:if><xsl:if test="@scale!=\'0\'">10<sup><xsl:value-of select="@scale"/></sup></xsl:if><xsl:value-of select="@kind"/>)\r\n        <sup><xsl:value-of select="@exponent"/></sup>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'unit\' and not(@exponent!=\'1\')]" mode="unitFormula">\r\n          (<xsl:if test="@multiplier!=\'1\'"><xsl:value-of select="@multiplier"/>&#8901;</xsl:if><xsl:if test="@scale!=\'0\'">10<sup><xsl:value-of select="@scale"/></sup></xsl:if><xsl:value-of select="@kind"/>)\r\n    </xsl:template>\r\n\r\n    \x3c!-- ??? <xsl:template match="l2v1:listOfUnits" mode="unitFormula">\r\n      <span class="error">= not supported for l2v1 =</span>\r\n    </xsl:template> --\x3e\r\n\x3c!-- END OF unitFormula/unitFormulaScale mode --\x3e\r\n\r\n\x3c!-- BEGIN OF idOrName mode --\x3e\r\n  <xsl:template match="@id" mode="idOrName">\r\n      <xsl:if test="$useNames=\'true\' and count(./../@name)>0">[<xsl:value-of select="./../@name"/>]</xsl:if>  \x3c!-- for simbio only--\x3e\r\n      <xsl:if test="$useNames=\'true\' and count(./../@name)=0">[no name]</xsl:if>\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="."/></xsl:if>\r\n  </xsl:template>\r\n\x3c!-- END OF idOrName mode --\x3e\r\n\r\n\x3c!-- BEGIN OF reactionFormula mode --\x3e\r\n  <xsl:template match="*[local-name()=\'reaction\']" mode="reactionFormula">\r\n    <xsl:if test="count(*[local-name()=\'listOfReactants\']/*[local-name()=\'speciesReference\'])=0">&#8709;</xsl:if>\r\n    <xsl:apply-templates select="*[local-name()=\'listOfReactants\']" mode="reactionFormula"/>\r\n    <xsl:if test="@reversible=\'false\' and @fast=\'true\'"> &#8594; </xsl:if>\r\n    <xsl:if test="not(@reversible=\'false\') and @fast=\'true\'"> &#8596; </xsl:if>\r\n    <xsl:if test="@reversible=\'false\' and not(@fast=\'true\')"> &#8658; </xsl:if>\r\n    <xsl:if test="not(@reversible=\'false\') and not(@fast=\'true\')"> &#8660; </xsl:if>\r\n    <xsl:if test="count(*[local-name()=\'listOfProducts\']/*[local-name()=\'speciesReference\'])=0">&#8709;</xsl:if>\r\n    <xsl:apply-templates select="*[local-name()=\'listOfProducts\']" mode="reactionFormula"/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfReactants / listOfProducts--\x3e\r\n  <xsl:template match="*[local-name()=\'listOfReactants\']\r\n    | *[local-name()=\'listOfProducts\']" mode="reactionFormula">\r\n    <xsl:for-each select="*[local-name()=\'speciesReference\']">\r\n      <xsl:if test="@stoichiometry!=\'1\' and @constant=\'false\'"><xsl:value-of select="@stoichiometry"/>&#215;</xsl:if>\r\n      <xsl:if test="@stoichiometry!=\'1\' and @constant=\'true\'"><xsl:value-of select="@id"/>&#215;</xsl:if>\r\n      <xsl:apply-templates select="@species"/>\r\n      <xsl:if test="position()!=last()"> + </xsl:if>\r\n    </xsl:for-each>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfModifiers--\x3e\r\n  <xsl:template match="*[local-name()=\'listOfModifiers\']" mode="reactionFormula">\r\n    <xsl:for-each select="*[local-name()=\'modifierSpeciesReference\']">\r\n\t  <xsl:apply-templates select="@species"/>\r\n      <xsl:if test="position()!=last()">; </xsl:if>\r\n    </xsl:for-each>\r\n  </xsl:template>\r\n\x3c!-- END OF reactionFormula mode --\x3e\r\n\r\n\x3c!-- BEGIN OF mml: part, =TO DO= include $correctMathml switcher, correction of SimBiology specific functions --\x3e\r\n  \x3c!-- correct for max function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside max --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- correct for min function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside min --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- use id or names for equations and normalize space --\x3e\r\n  <xsl:template match="mml:ci">\r\n    <xsl:element name="ci" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:if test="$useNames=\'true\' and key(\'idKey\',normalize-space(text()))/@name">[<xsl:value-of select="key(\'idKey\',normalize-space(text()))/@name"/>]</xsl:if>\r\n      <xsl:if test="$useNames=\'true\' and not(key(\'idKey\',normalize-space(text()))/@name)">[no name]</xsl:if>\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="normalize-space(text())"/></xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- adaptation of e-notation for MathJax --\x3e\r\n  <xsl:template match="mml:cn[@type=\'e-notation\']">\r\n    <xsl:element name="cn" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:copy-of select="normalize-space(text()[1])"/><xsl:if test="normalize-space(text()[2])!=\'0\'">e<xsl:copy-of select="normalize-space(text()[2])"/>\r\n      </xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- adaptation of integer for MathJax --\x3e\r\n  <xsl:template match="mml:cn[@type=\'integer\']">\r\n    <xsl:element name="cn" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:copy-of select="normalize-space(text())"/>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- just copy mml or not --\x3e\r\n  <xsl:template match="mml:math">\r\n    <xsl:if test="$equationsOff=\'true\'"><span class="sv-hidden">Equations are hidden</span></xsl:if>\r\n    <xsl:if test="not($equationsOff=\'true\')">\r\n      <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="mml:*">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="mml:lambda">\r\n   <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n    <xsl:element name="equivalent" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n    <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:element name="ci" namespace="http://www.w3.org/1998/Math/MathML">f</xsl:element>\r\n      <xsl:copy-of select="mml:bvar/mml:*"/>\r\n    </xsl:element>\r\n    <xsl:copy-of select="*[local-name()!=\'bvar\']"/>\r\n\r\n   </xsl:element>\r\n  </xsl:template>\r\n\x3c!-- END OF mml: part --\x3e\r\n</xsl:stylesheet>\r\n'},"TM+8":function(e,t){},Ubdk:function(e,t){},VEDB:function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\r\n\x3c!--\r\nCopyright 2016-2017 Institute for Systems Biology Moscow\r\n\r\n   Licensed under the Apache License, Version 2.0 (the "License");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an "AS IS" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n--\x3e\r\n\x3c!-- INFO\r\nDescription: Creating representation of single element with dependencies\r\nmodes:\r\n  - element\r\n  - reactionFormula\r\n  - dependencies/searchdependencies\r\n  - idOrName/idOrNamePlus\r\n\r\nAuthor: Evgeny Metelkin\r\nCopyright: InSysBio LLC, 2016-2017\r\nLast modification: 2017-06-18\r\n\r\nProject-page: http://sv.insysbio.ru\r\n--\x3e\r\n<xsl:stylesheet version="1.0"\r\n  xmlns="http://www.w3.org/1999/xhtml"\r\n  xmlns:xhtml="http://www.w3.org/1999/xhtml"\r\n  xmlns:l2v1="http://www.sbml.org/sbml/level2/version1"\r\n  xmlns:l2v2="http://www.sbml.org/sbml/level2/version2"\r\n  xmlns:l2v3="http://www.sbml.org/sbml/level2/version3"\r\n  xmlns:l2v4="http://www.sbml.org/sbml/level2/version4"\r\n  xmlns:l2v5="http://www.sbml.org/sbml/level2/version5"\r\n  xmlns:l3v1="http://www.sbml.org/sbml/level3/version1/core"\r\n  xmlns:l3v2="http://www.sbml.org/sbml/level3/version2/core"\r\n  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"\r\n  xmlns:mml="http://www.w3.org/1998/Math/MathML"\r\n  xmlns:exsl="http://exslt.org/common"\r\n  xmlns:msexsl="urn:schemas-microsoft-com:xslt"\r\n\r\n  exclude-result-prefixes="mml xhtml exsl msexsl l2v1 l2v2 l2v3 l2v4 l2v5 l3v1 l3v2">\r\n\r\n  \x3c!-- GLOBAL KEYS --\x3e\r\n  <xsl:key name="idKey" match="/*/*/*/*" use="@id"/>\x3c!-- to exclude local parameters --\x3e\r\n  \x3c!--<xsl:key name="idKey" match="*" use="@id"/>--\x3e\r\n  <xsl:key name="variableKey" match="/*/*/*/*" use="@variable"/>\r\n\r\n  \x3c!-- PARAMETERS --\x3e\r\n  <xsl:param name="useNames">false</xsl:param> \x3c!-- use names instead of id in equations --\x3e\r\n  <xsl:param name="correctMathml">false</xsl:param> \x3c!-- use correction in MathML (for simbio) always on currently--\x3e\r\n  <xsl:param name="equationsOff">false</xsl:param> \x3c!-- do not show equations --\x3e\r\n  <xsl:param name="input_root" select="/"/> \x3c!-- main document reference --\x3e\r\n  <xsl:param name="elementId">default</xsl:param> \x3c!-- include unitDefinitions and attribute --\x3e\r\n  <xsl:param name="isEdge">false</xsl:param> \x3c!-- define browser --\x3e\r\n  <xsl:param name="dependent" >\r\n    <ci><xsl:value-of select="$elementId"/></ci>\r\n    <xsl:apply-templates select="key(\'idKey\', $elementId)" mode="searchdependencies"/>\r\n  </xsl:param>\r\n\r\n  \x3c!-- top element --\x3e\r\n  <xsl:template match="/">\r\n    <div class="sv-container">\r\n      <xsl:attribute name="class">sbml-element \x3c!--sbml-<xsl:value-of select="key(\'idKey\', $elementId)[1]/local-name()"/>--\x3e sv-container sv-mode-element</xsl:attribute>\r\n      <xsl:apply-templates select="key(\'idKey\', $elementId)[1]"/>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- Attributes --\x3e\r\n  <xsl:template match="@*" mode="element">\r\n    <p>\r\n      <xsl:attribute name="class">sbml-attribute sbml-<xsl:value-of select="local-name()"/></xsl:attribute>\r\n      <span class="sbml-attribute-name"><xsl:value-of select="local-name()"/></span>:\r\n      <span class="sbml-attribute-value"><xsl:value-of select="."/></span>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- Annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'annotation\']" mode="element">\r\n    <div class="sbml-element sbml-annotation sv-container">\r\n      <p class="sv-header">Annotation</p>\r\n      <pre class="sv-content sv-raw-xml prettyprint"><xsl:copy-of select="node()"/></pre>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- Notes --\x3e\r\n  <xsl:template match="*[local-name()=\'notes\']" mode="element">\r\n    <div class="sbml-element sbml-notes sv-container">\r\n      <p class="sv-header">Notes</p>\r\n      <div class="sv-content sv-xhtml">\r\n        <xsl:copy-of select="node()"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\x3c!--\r\n  <xsl:template match="*[local-name()=\'notes\' and xhtml:body]" mode="element">\r\n   <p><strong>notes:</strong></p>\r\n   <div class="sv-note-content">\r\n    <xsl:copy-of select="xhtml:body/node()"/>\r\n   </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'notes\' and xhtml:html[xhtml:body]]" mode="element">\r\n   <p><strong>notes:</strong></p>\r\n   <div class="sv-note-content">\r\n    <xsl:copy-of select="xhtml:html/xhtml:body/node()"/>\r\n   </div>\r\n  </xsl:template>\r\n--\x3e\r\n  \x3c!-- compartment summary --\x3e\r\n  <xsl:template match="*[local-name()=\'compartment\']\r\n    | *[local-name()=\'parameter\']\r\n    | *[local-name()=\'species\']">\r\n      <h1 class="sv-header"><xsl:value-of select="local-name()"/></h1>\r\n      <div class="sv-content sbml-mixed">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <xsl:call-template name="dependencies"/>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- reaction summary --\x3e\r\n  <xsl:template match="*[local-name()=\'reaction\']">\r\n    <h1 class="sv-header">reaction</h1>\r\n    <div class="sv-content sbml-mixed">\r\n      <xsl:apply-templates select="@*" mode="element"/>\r\n      <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n      <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n      <xsl:apply-templates select="." mode="reactionFormula"/>\r\n      <xsl:apply-templates select="*[local-name()=\'listOfModifiers\']" mode="reactionFormula"/>\r\n\r\n      <xsl:call-template name="dependencies"/>\r\n    </div>\r\n  </xsl:template>\r\n\r\n\x3c!-- BEGIN OF idOrName/idOrNamePlus mode --\x3e\r\n  <xsl:template match="@id|@variable" mode="idOrName">\r\n      <xsl:if test="$useNames=\'true\'"><xsl:value-of select="./../@name"/></xsl:if>  \x3c!-- for simbio only--\x3e\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="."/></xsl:if>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="@id|@variable" mode="idOrNamePlus">\r\n      <xsl:if test="$useNames=\'true\'"><xsl:value-of select="./../@name"/></xsl:if>  \x3c!-- for simbio only--\x3e\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="."/></xsl:if>\r\n    </xsl:template>\r\n\x3c!-- END OF idOrName/idOrNamePlus mode --\x3e\r\n\r\n\x3c!-- BEGIN OF reactionFormula mode --\x3e\r\n  <xsl:template match="*[local-name()=\'reaction\']" mode="reactionFormula">\r\n    <div class="sbml-mixed sv-container">\r\n      <h2 class="sv-header">reactants / products:</h2>\r\n      <div class="sv-content">\r\n        <xsl:if test="count(*[local-name()=\'listOfReactants\']/*[local-name()=\'speciesReference\'])=0">&#8709;</xsl:if>\r\n        <xsl:apply-templates select="*[local-name()=\'listOfReactants\']" mode="reactionFormula"/>\r\n        <xsl:if test="@reversible=\'false\' and @fast=\'true\'"> &#8594; </xsl:if>\r\n        <xsl:if test="not(@reversible=\'false\') and @fast=\'true\'"> &#8596; </xsl:if>\r\n        <xsl:if test="@reversible=\'false\' and not(@fast=\'true\')"> &#8658; </xsl:if>\r\n        <xsl:if test="not(@reversible=\'false\') and not(@fast=\'true\')"> &#8660; </xsl:if>\r\n        <xsl:if test="count(*[local-name()=\'listOfProducts\']/*[local-name()=\'speciesReference\'])=0">&#8709;</xsl:if>\r\n        <xsl:apply-templates select="*[local-name()=\'listOfProducts\']" mode="reactionFormula"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfReactants / listOfProducts--\x3e\r\n  <xsl:template match="*[local-name()=\'listOfReactants\']\r\n    | *[local-name()=\'listOfProducts\']" mode="reactionFormula">\r\n    <xsl:for-each select="*[local-name()=\'speciesReference\']">\r\n      <xsl:if test="@stoichiometry!=\'1\'"><xsl:value-of select="@stoichiometry"/>&#215;</xsl:if>\r\n      <xsl:apply-templates select="key(\'idKey\',@species)/@id" mode="idOrName"/>\r\n      <xsl:if test="position()!=last()"> + </xsl:if>\r\n    </xsl:for-each>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfModifiers--\x3e\r\n  <xsl:template match="*[local-name()=\'listOfModifiers\']" mode="reactionFormula">\r\n    <div class="sbml-element sbml-listOf sbml-listOfModifiers sv-container">\r\n      <h2 class="sv-header">modifiers:</h2>\r\n      <div class="sv-content">\r\n        <xsl:for-each select="*[local-name()=\'modifierSpeciesReference\']">\r\n          <xsl:apply-templates select="key(\'idKey\',@species)/@id" mode="idOrName"/>\r\n          <xsl:if test="position()!=last()">; </xsl:if>\r\n        </xsl:for-each>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\x3c!-- END OF reactionFormula mode --\x3e\r\n\r\n\x3c!-- BEGIN OF searchdependencies mode --\x3e\r\n  <xsl:template match="*[local-name()=\'reaction\']" mode="searchdependencies">\r\n    <xsl:for-each select="descendant::mml:ci">\r\n      <ci><xsl:value-of select="normalize-space(text())"/></ci>\r\n      <xsl:apply-templates select="key(\'idKey\', normalize-space(text()))" mode="searchdependencies"/>\r\n    </xsl:for-each>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'compartment\' or local-name()=\'parameter\']" mode="searchdependencies">\r\n    <xsl:for-each select="key(\'variableKey\', @id)/descendant::mml:ci">\r\n      <ci>\r\n      <xsl:value-of select="normalize-space(text())"/>\r\n      </ci>\r\n      <xsl:apply-templates select="key(\'idKey\', normalize-space(text()))" mode="searchdependencies"/>\r\n    </xsl:for-each>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\']" mode="searchdependencies">\r\n    <xsl:for-each select="key(\'variableKey\', @id)/descendant::mml:ci">\r\n      <ci>\r\n      <xsl:value-of select="normalize-space(text())"/>\r\n      </ci>\r\n      <xsl:apply-templates select="key(\'idKey\', normalize-space(text()))" mode="searchdependencies"/>\r\n    </xsl:for-each>\r\n\t\x3c!-- add compartment to search --\x3e\r\n\t<xsl:if test="(@hasOnlySubstanceUnits=\'true\' and @initialConcentration) or (not(@hasOnlySubstanceUnits=\'true\') and @initialAmount)">\r\n\t  <ci><xsl:value-of select="@compartment"/></ci>\r\n      <xsl:apply-templates select="key(\'idKey\', @compartment)" mode="searchdependencies"/>\r\n\t</xsl:if>\r\n  </xsl:template>\r\n\x3c!-- END OF searchdependencies mode --\x3e\r\n\r\n\x3c!-- BEGIN OF dependencies mode --\x3e\r\n  <xsl:template name="dependencies">\r\n    <div class="sbml-mixed sv-container">\r\n      <h2 class="sv-header">dependencies:</h2>\r\n      <div class="sv-content">\r\n        <table>\r\n          <xsl:if test="$isEdge=\'false\'">\r\n            <xsl:for-each select="exsl:node-set($dependent)/xhtml:ci[not(text()=preceding-sibling::xhtml:ci/text())]">\r\n             \x3c!--<xsl:apply-templates select="exsl:node-set($input_root)/descendant::*[@id=current()/text()]" mode="dependencies"/>--\x3e\r\n      \t      <xsl:apply-templates select="exsl:node-set($input_root)/*/*/*/*[@id=current()/text()]" mode="dependencies"/> \x3c!-- search id without local parameters --\x3e\r\n            </xsl:for-each>\r\n          </xsl:if>\r\n          <xsl:if test="$isEdge=\'true\'">\r\n            <xsl:for-each select="msexsl:node-set($dependent)/xhtml:ci[not(text()=preceding-sibling::xhtml:ci/text())]">\r\n             \x3c!--<xsl:apply-templates select="exsl:node-set($input_root)/descendant::*[@id=current()/text()]" mode="dependencies"/>--\x3e\r\n      \t      <xsl:apply-templates select="msexsl:node-set($input_root)/*/*/*/*[@id=current()/text()]" mode="dependencies"/> \x3c!-- search id without local parameters --\x3e\r\n            </xsl:for-each>\r\n          </xsl:if>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'compartment\' or local-name()=\'parameter\']" mode="dependencies">\r\n    <tr>\r\n    <td><xsl:apply-templates select="@id" mode="idOrNamePlus"/></td>\r\n    <td>=</td>\r\n    <td>\r\n    <xsl:if test="not(key(\'variableKey\', @id))">\r\n      <xsl:value-of select="@value"/>\r\n      <xsl:value-of select="@size"/>\r\n\t  <xsl:if test="not(@value) and not(@size)">?</xsl:if>\r\n    </xsl:if>\r\n\t<xsl:if test="key(\'variableKey\', @id)">\r\n      <xsl:apply-templates select="key(\'variableKey\', @id)/mml:math"/>\r\n\t</xsl:if>\r\n    </td>\r\n    </tr>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'reaction\']" mode="dependencies">\r\n    <tr>\r\n      <td><xsl:apply-templates select="@id"  mode="idOrNamePlus"/></td>\r\n      <td>=</td>\r\n      <td><xsl:apply-templates select="*[local-name()=\'kineticLaw\']/mml:math"/></td>\r\n    </tr>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and not(@hasOnlySubstanceUnits=\'true\')]" mode="dependencies">\r\n    <tr>\r\n      <td><xsl:apply-templates select="@id"  mode="idOrNamePlus"/></td>\r\n      <td>\r\n        <xsl:if test="@boundaryCondition=\'true\'">=</xsl:if>\r\n        <xsl:if test="not(@boundaryCondition=\'true\')">&#8592;</xsl:if>\r\n      </td>\r\n      <td>\r\n      <xsl:if test="not(key(\'variableKey\', @id))">\r\n        <xsl:element name="math" namespace="http://www.w3.org/1998/Math/MathML">\r\n              <xsl:if test="@initialConcentration">\r\n                <cn xmlns="http://www.w3.org/1998/Math/MathML"><xsl:value-of select="@initialConcentration"/></cn>\r\n              </xsl:if>\r\n              <xsl:if test="@initialAmount">\r\n                <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n                  <divide xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n                  <cn xmlns="http://www.w3.org/1998/Math/MathML"><xsl:value-of select="@initialAmount"/></cn>\r\n                  <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="key(\'idKey\',@compartment)/@id" mode="idOrName"/></ci>\r\n                </apply>\r\n              </xsl:if>\r\n              <xsl:if test="not(@initialConcentration or @initialAmount)">\r\n                <ci xmlns="http://www.w3.org/1998/Math/MathML">?</ci>\r\n              </xsl:if>\r\n        </xsl:element>\r\n        </xsl:if>\r\n        <xsl:if test="key(\'variableKey\', @id)">\r\n          <xsl:apply-templates select="key(\'variableKey\', @id)/mml:math"/>\r\n        </xsl:if>\r\n      </td>\r\n    </tr>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and @hasOnlySubstanceUnits=\'true\']" mode="dependencies">\r\n    <tr>\r\n      <td><xsl:apply-templates select="@id"  mode="idOrNamePlus"/></td>\r\n    <td>\r\n      <xsl:if test="@boundaryCondition=\'true\'">=</xsl:if>\r\n      <xsl:if test="not(@boundaryCondition=\'true\')">&#8592;</xsl:if>\r\n    </td>\r\n    <td>\r\n    <xsl:if test="not(key(\'variableKey\', @id))">\r\n      <xsl:element name="math" namespace="http://www.w3.org/1998/Math/MathML">\r\n            <xsl:if test="@initialAmount">\r\n              <cn xmlns="http://www.w3.org/1998/Math/MathML"><xsl:value-of select="@initialAmount"/></cn>\r\n            </xsl:if>\r\n            <xsl:if test="@initialConcentration">\r\n              <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n                <times xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n                <cn xmlns="http://www.w3.org/1998/Math/MathML"><xsl:value-of select="@initialConcentration"/></cn>\r\n                <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="key(\'idKey\',@compartment)/@id" mode="idOrName"/></ci>\r\n              </apply>\r\n            </xsl:if>\r\n            <xsl:if test="not(@initialConcentration or @initialAmount)">\r\n              <ci xmlns="http://www.w3.org/1998/Math/MathML">?</ci>\r\n            </xsl:if>\r\n      </xsl:element>\r\n    </xsl:if>\r\n    <xsl:if test="key(\'variableKey\', @id)">\r\n      <xsl:apply-templates select="key(\'variableKey\', @id)/mml:math"/>\r\n    </xsl:if>\r\n    </td>\r\n    </tr>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'functionDefinition\']" mode="dependencies">\r\n    <tr>\r\n      <td>\r\n        <math xmlns="http://www.w3.org/1998/Math/MathML">\r\n          <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n            <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="@id" mode="idOrName"/></ci>\r\n            <xsl:copy-of select="mml:math/mml:lambda/mml:bvar/mml:*"/>\r\n          </apply>\r\n        </math>\r\n      </td>\r\n      <td>&#8801;</td>\r\n      <td>\r\n        <math xmlns="http://www.w3.org/1998/Math/MathML">\r\n          <xsl:copy-of select="mml:math/mml:lambda/*[local-name()!=\'bvar\']"/>\r\n        </math>\r\n      </td>\r\n    </tr>\r\n\r\n  \x3c!--\r\n      <p>\r\n        <math xmlns="http://www.w3.org/1998/Math/MathML">\r\n          <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n            <equivalent xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n              <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n                  <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="@id" mode="idOrName"/></ci>\r\n                  <xsl:copy-of select="mml:math/mml:lambda/mml:bvar/mml:*"/>\r\n              </apply>\r\n              <xsl:copy-of select="mml:math/mml:lambda/*[local-name()!=\'bvar\']"/>\r\n          </apply>\r\n        </math>\r\n      </p>\r\n  --\x3e\r\n  </xsl:template>\r\n\r\n\x3c!-- END OF dependencies mode --\x3e\r\n\r\n\x3c!-- BEGIN OF mml: part --\x3e\r\n  \x3c!-- correct for max function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside max --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- correct for min function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside min --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- use id or names for equations and normalize space --\x3e\r\n  <xsl:template match="mml:ci">\r\n    <xsl:element name="ci" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:if test="$useNames=\'true\'"><xsl:value-of select="key(\'idKey\',normalize-space(text()))/@name"/></xsl:if>  \x3c!-- for simbio only--\x3e\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="normalize-space(text())"/></xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- adaptation of e-notation for MathJax --\x3e\r\n  <xsl:template match="mml:cn[@type=\'e-notation\']">\r\n    <xsl:element name="cn" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:copy-of select="normalize-space(text()[1])"/><xsl:if test="normalize-space(text()[2])!=\'0\'">e<xsl:copy-of select="normalize-space(text()[2])"/>\r\n      </xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- just copy mml:math or not --\x3e\r\n  <xsl:template match="mml:math">\r\n    <xsl:if test="$equationsOff=\'true\'"><span class="sv-hidden">Equations are hidden</span></xsl:if>\r\n    <xsl:if test="not($equationsOff=\'true\')">\r\n      <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- just copy all mml elements --\x3e\r\n  <xsl:template match="mml:*">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\x3c!-- END OF mml: part --\x3e\r\n</xsl:stylesheet>\r\n'},gir7:function(e,t){},pQeK:function(e,t,l){"use strict";var n=l("wA4W"),s=l("KohE"),a=l("VEDB"),r=l("QrHG"),m=l("u1Wy");e.exports=function(e){var t=e.parseFromString(n,"application/xml"),l=e.parseFromString(s,"application/xml"),i=e.parseFromString(a,"application/xml");return[{format:"SBML",level:"2",name:"sbml2table",xslt:t,parameters:["useNames","correctMathml","equationsOff"],parameterNotes:{useNames:'Use "names" attribute instead of "id" attribute. Turn on the option for models with very long or uninformative ids',correctMathml:"Make some correction for MathML generated by SimBiology. Some of SimBiology models generate wrong MathML. Try this option if something looks wrong in equations.",equationsOff:"Use this option if you are not interested in math. It reduces time of transformation."}},{format:"SBML",level:"2",name:"sbml2math",xslt:l,parameters:["useNames","correctMathml","equationsOff"],parameterNotes:{useNames:'Use "names" attribute instead of "id" attribute. Turn on the option for models with very long or uninformative ids',correctMathml:"Make some correction for MathML generated by SimBiology. Some of SimBiology models generate wrong MathML. Try this option if something looks wrong in equations.",equationsOff:"Use this option if you are not interested in math. It reduces time of transformation."}},{format:"SBML",level:"2",name:"sbml2element",xslt:i,parameters:["useNames","correctMathml","equationsOff","elementId"],parameterNotes:{useNames:'Use "names" attribute instead of "id" attribute. Turn on the option for models with very long or uninformative ids',correctMathml:"Make some correction for MathML generated by SimBiology. Some of SimBiology models generate wrong MathML. Try this option if something looks wrong in equations.",equationsOff:"Use this option if you are not interested in math. It reduces time of transformation."}},{format:"SBML",level:"3",name:"sbml3table",xslt:e.parseFromString(r,"application/xml"),parameters:["useNames","correctMathml","equationsOff"],parameterNotes:{useNames:'Use "names" attribute instead of "id" attribute. Turn on the option for models with very long or uninformative ids',correctMathml:"Make some correction for MathML generated by SimBiology. Some of SimBiology models generate wrong MathML. Try this option if something looks wrong in equations.",equationsOff:"Use this option if you are not interested in math. It reduces time of transformation."}},{format:"SBML",level:"3",name:"sbml3math",xslt:e.parseFromString(m,"application/xml"),parameters:["useNames","correctMathml","equationsOff"],parameterNotes:{useNames:'Use "names" attribute instead of "id" attribute. Turn on the option for models with very long or uninformative ids',correctMathml:"Make some correction for MathML generated by SimBiology. Some of SimBiology models generate wrong MathML. Try this option if something looks wrong in equations.",equationsOff:"Use this option if you are not interested in math. It reduces time of transformation."}},{format:"SBML",level:"3",name:"sbml2element",xslt:i,parameters:["useNames","correctMathml","equationsOff","elementId"],parameterNotes:{useNames:'Use "names" attribute instead of "id" attribute. Turn on the option for models with very long or uninformative ids',correctMathml:"Make some correction for MathML generated by SimBiology. Some of SimBiology models generate wrong MathML. Try this option if something looks wrong in equations.",equationsOff:"Use this option if you are not interested in math. It reduces time of transformation."}}]}},u1Wy:function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\r\n\x3c!--\r\nCopyright 2016-2017 Institute for Systems Biology Moscow\r\n\r\n   Licensed under the Apache License, Version 2.0 (the "License");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an "AS IS" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n--\x3e\r\n\x3c!-- INFO\r\nDescription: Creating representation of whole sbml as systems of equations:\r\nmodes:\r\n  - idOrName\r\n  - math\r\n  - const/diff-init/diff-eq\r\n\r\nAuthor: Evgeny Metelkin\r\nCopyright: InSysBio LLC, 2016-2017\r\nLast modification: 2017-06-15\r\n\r\nProject-page: http://sv.insysbio.ru\r\n--\x3e\r\n<xsl:stylesheet version="1.0"\r\n  xmlns="http://www.w3.org/1999/xhtml"\r\n  xmlns:xhtml="http://www.w3.org/1999/xhtml"\r\n  xmlns:l3v1="http://www.sbml.org/sbml/level3/version1/core"\r\n  xmlns:l3v2="http://www.sbml.org/sbml/level3/version2/core"\r\n  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"\r\n  xmlns:mml="http://www.w3.org/1998/Math/MathML"\r\n  exclude-result-prefixes="mml xhtml l3v2 l3v1">\r\n\r\n  \x3c!-- GLOBAL KEYS --\x3e\r\n  <xsl:key name="idKey" match="*" use="@id"/>\r\n  <xsl:key name="variableKey" match="*" use="@variable"/>\r\n\r\n  \x3c!-- PARAMETERS --\x3e\r\n  <xsl:param name="useNames">false</xsl:param> \x3c!-- use names instead of id in equations --\x3e\r\n  <xsl:param name="correctMathml">false</xsl:param> \x3c!-- use correction in MathML (for simbio) always on currently--\x3e\r\n  <xsl:param name="equationsOff">false</xsl:param> \x3c!-- do not show equations --\x3e\r\n\r\n  \x3c!-- top --\x3e\r\n  <xsl:template match="/">\r\n    <div id="top">\r\n      <xsl:apply-templates mode="math"/>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- SBML --\x3e\r\n  <xsl:template match="*[local-name()=\'sbml\']" mode="math">\r\n    <div class="sv-sbml-container sv-mode-table">\r\n      <h1 class="sv-sbml-header">SBML level <xsl:value-of select="@level"/> version <xsl:value-of select="@version"/></h1>\r\n      <div class="sv-sbml-content">\r\n        <xsl:apply-templates select="*[local-name()=\'model\']" mode="math"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- model --\x3e\r\n  <xsl:template match="*[local-name()=\'model\']" mode="math">\r\n    <div class="sv-container sv-model-container">\r\n      <h2 class="sv-model-header">Model</h2>\r\n      <div class="sv-model-content">\r\n        <xsl:apply-templates select="@*"/>\r\n\r\n        <xsl:if test="count(//*[local-name()=\'functionDefinition\'])">\r\n          <xsl:call-template name="functions"/>\r\n        </xsl:if>\r\n        <xsl:if test="count(\r\n          //*[local-name()=\'model\']/*/*[local-name()=\'parameter\'][not(key(\'variableKey\',@id))] |\r\n          //*[local-name()=\'compartment\'][not(key(\'variableKey\',@id))] |\r\n          //*[local-name()=\'species\' and @boundaryCondition=\'true\'][not(key(\'variableKey\',@id))]\r\n          )">\r\n          <xsl:call-template name="constants"/>\r\n        </xsl:if>\r\n        <xsl:if test="count(\r\n          //*[local-name()=\'assignmentRule\'] |\r\n          //*[local-name()=\'reaction\']\r\n          )">\r\n          <xsl:call-template name="exp-rules"/>\r\n        </xsl:if>\r\n        <xsl:if test="count(//*[local-name()=\'algebraicRule\'])">\r\n          <xsl:call-template name="imp-rules"/>\r\n        </xsl:if>\r\n        <xsl:if test="count(\r\n          //*[local-name()=\'species\' and not(@boundaryCondition=\'true\')] |\r\n          //*[local-name()=\'initialAssignment\']\r\n          )">\r\n          <xsl:call-template name="init"/>\r\n        </xsl:if>\r\n        <xsl:if test="count(\r\n          //*[local-name()=\'species\' and not(@boundaryCondition=\'true\')] |\r\n          //*[local-name()=\'rateRule\']\r\n          )">\r\n          <xsl:call-template name="diff-eq"/>\r\n        </xsl:if>\r\n        <xsl:if test="count(//*[local-name()=\'event\'])">\r\n          <xsl:call-template name="events"/>\r\n        </xsl:if>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="@*">\r\n    <p>\r\n      <xsl:attribute name="class">sv-attribute-container sv-attribute-<xsl:value-of select="local-name()"/></xsl:attribute>\r\n      <span class="sbml-attribute-name"><xsl:value-of select="local-name()"/></span>: <span class="sv-attribute-value"><xsl:value-of select="."/></span>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- idOrName mode --\x3e\r\n  <xsl:template match="@id" mode="idOrName">\r\n      <xsl:if test="$useNames=\'true\' and count(./../@name)>0">[<xsl:value-of select="./../@name"/>]</xsl:if>  \x3c!-- for simbio only--\x3e\r\n      <xsl:if test="$useNames=\'true\' and count(./../@name)=0">[no name]</xsl:if>\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="."/></xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- functions --\x3e\r\n  <xsl:template name="functions">\r\n    <div class="sv-container">\r\n      <h2 class="sv-header sv-functionDefinition-header">Functions:</h2>\r\n      <div class="sv-content sv-functionDefinition-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'functionDefinition\']"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'functionDefinition\']">\r\n    <p>\r\n      <math xmlns="http://www.w3.org/1998/Math/MathML">\r\n        <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n          <equivalent xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n            <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n                <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="@id" mode="idOrName"/></ci>\r\n                <xsl:copy-of select="mml:math/mml:lambda/mml:bvar/mml:*"/>\r\n            </apply>\r\n            <xsl:copy-of select="mml:math/mml:lambda/*[local-name()!=\'bvar\']"/>\r\n        </apply>\r\n      </math>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- constants --\x3e\r\n  <xsl:template name="constants">\r\n    <div class="sv-container">\r\n      <h2 class="sv-header">Constants:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'model\']/*/*[local-name()=\'parameter\' and not(key(\'variableKey\',@id))]" mode="const"/>\r\n        <xsl:apply-templates select="//*[local-name()=\'compartment\' and not(key(\'variableKey\',@id))]" mode="const"/>\r\n        <xsl:apply-templates select="//*[local-name()=\'species\' and @boundaryCondition=\'true\' and not(key(\'variableKey\',@id))]" mode="const"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'parameter\']" mode="const">\r\n    <p>\r\n      <xsl:apply-templates select="@id" mode="idOrName"/>\r\n      = <xsl:value-of select="@value"/><xsl:if test="not(@value)">?</xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'compartment\']" mode="const">\r\n    <p>\r\n      <xsl:apply-templates select="@id" mode="idOrName"/>\r\n      = <xsl:value-of select="@size"/><xsl:if test="not(@size)">?</xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and @initialAmount]" mode="const">\r\n    <p>\r\n      <xsl:apply-templates select="@id" mode="idOrName"/> = <xsl:value-of select="@initialAmount"/><xsl:if test="@hasOnlySunstanceUnits!=\'true\'">/<xsl:value-of select="@compartment"/></xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and @initialConcentration]" mode="const">\r\n    <p>\r\n      <xsl:apply-templates select="@id" mode="idOrName"/> = <xsl:value-of select="@initialConcentration"/><xsl:if test="@hasOnlySunstanceUnits=\'true\'">*<xsl:value-of select="@compartment"/></xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- explicit rules --\x3e\r\n  <xsl:template name="exp-rules">\r\n    <div class="sv-container">\r\n      <h2 class="sv-header">Explicit rules:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'assignmentRule\']"/>\x3c!-- ???  --\x3e\r\n        <xsl:apply-templates select="//*[local-name()=\'reaction\']"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'assignmentRule\']">\r\n    <p>\r\n      <xsl:if test="key(\'idKey\',@variable)"><xsl:apply-templates select="key(\'idKey\',@variable)/@id" mode="idOrName"/></xsl:if>\r\n      <xsl:if test="not(key(\'idKey\',@variable))"><span class="sv-id-lost"><xsl:value-of select="@variable"/></span></xsl:if>\r\n      = <xsl:apply-templates select="mml:math"/>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'reaction\']">\r\n    <p>\r\n      <xsl:apply-templates select="@id" mode="idOrName"/>\r\n      = <xsl:apply-templates select="*[local-name()=\'kineticLaw\']/mml:math"/>\r\n      <xsl:if test="*[local-name()=\'kineticLaw\']/*[local-name()=\'listOfParameters\']/*[local-name()=\'parameter\']">\r\n        <div class="sv-localParameters-container">\r\n          <p>where</p>\r\n          <xsl:apply-templates select="*[local-name()=\'kineticLaw\']/*[local-name()=\'listOfParameters\']/*[local-name()=\'parameter\']" mode="const"/>\r\n        </div>\r\n      </xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- implicit rules --\x3e\r\n  <xsl:template name="imp-rules">\r\n    <div class="sv-container">\r\n      <h2 class="sv-header">Implicit rules:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'algebraicRule\']"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'algebraicRule\']">\r\n    <p>\r\n      0 = <xsl:apply-templates select="mml:math"/>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- diff-init --\x3e\r\n  <xsl:template name="init">\r\n    <div class="sv-container">\r\n      <h2 class="sv-header">Initiate at start:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'species\' and not(@boundaryCondition=\'true\')]" mode="diff-init"/>\r\n        <xsl:apply-templates select="//*[local-name()=\'initialAssignment\']" mode="diff-init"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'initialAssignment\']" mode="diff-init">\r\n    <p>\r\n      <xsl:if test="key(\'idKey\',@symbol)"><xsl:apply-templates select="key(\'idKey\',@symbol)/@id" mode="idOrName"/></xsl:if>\r\n      <xsl:if test="not(key(\'idKey\',@symbol))"><span class="sv-id-lost"><xsl:value-of select="@symbol"/></span></xsl:if>\r\n      &#8592;\r\n      <xsl:apply-templates select="mml:math"/>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and not(@boundaryCondition=\'true\') and not(@hasOnlySubstanceUnits=\'true\')]" mode="diff-init">\r\n    <p>\r\n      <xsl:apply-templates select="@id" mode="idOrName"/> &#8592;\r\n      <xsl:if test="@initialConcentration">\r\n        <xsl:value-of select="@initialConcentration"/>\r\n      </xsl:if>\r\n      <xsl:if test="@initialAmount">\r\n        <xsl:value-of select="@initialAmount"/> / <xsl:apply-templates select="key(\'idKey\',@compartment)/@id" mode="idOrName"/>\r\n      </xsl:if>\r\n      <xsl:if test="not(@initialConcentration or @initialAmount)">?</xsl:if>\r\n    </p>\r\n  </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'species\' and not(@boundaryCondition=\'true\') and @hasOnlySubstanceUnits=\'true\']" mode="diff-init">\r\n      <p>\r\n        <xsl:apply-templates select="@id" mode="idOrName"/> &#8592;\r\n            <xsl:if test="@initialAmount">\r\n              <xsl:value-of select="@initialAmount"/>\r\n            </xsl:if>\r\n            <xsl:if test="@initialConcentration">\r\n              <xsl:value-of select="@initialConcentration"/> &#8901; <xsl:apply-templates select="key(\'idKey\',@compartment)/@id" mode="idOrName"/>\r\n            </xsl:if>\r\n            <xsl:if test="not(@initialConcentration or @initialAmount)">?</xsl:if>\r\n      </p>\r\n    </xsl:template>\r\n\r\n  \x3c!-- diff-eq --\x3e\r\n  <xsl:template name="diff-eq">\r\n    <div class="sv-container">\r\n      <h2 class="sv-header">Differential equations:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'species\' and not(@boundaryCondition=\'true\')]" mode="diff-eq"/>\r\n        <xsl:apply-templates select="//*[local-name()=\'rateRule\']" mode="diff-eq"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\' and not(@boundaryCondition=\'true\')]" mode="diff-eq">\r\n    <p>\r\n      (<xsl:if test="not(@hasOnlySubstanceUnits=\'true\')"><xsl:apply-templates select="key(\'idKey\',@compartment)/@id" mode="idOrName"/> &#8901; </xsl:if>\r\n        <xsl:apply-templates select="@id" mode="idOrName"/>)\' =\r\n      <math xmlns="http://www.w3.org/1998/Math/MathML">\r\n            <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n              <plus xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n              <xsl:apply-templates select="//*[local-name()=\'reaction\']/*/*[local-name()=\'speciesReference\' and @species=current()/@id]" mode="diff-eq"/>\r\n              <xsl:if test="count(//*[local-name()=\'reaction\']/*/*[local-name()=\'speciesReference\' and @species=current()/@id])=0"><cn xmlns="http://www.w3.org/1998/Math/MathML">0</cn></xsl:if>\r\n            </apply>\r\n      </math>\r\n    </p>\r\n  </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'listOfProducts\']/*[local-name()=\'speciesReference\' and not(@stoichiometry!=\'1\')]" mode="diff-eq">\r\n        <xsl:element name="ci" namespace="http://www.w3.org/1998/Math/MathML">\r\n          <xsl:apply-templates select="../../@id" mode="idOrName"/>\r\n        </xsl:element>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'listOfReactants\']/*[local-name()=\'speciesReference\' and not(@stoichiometry!=\'1\')]" mode="diff-eq">\r\n      <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n        <minus xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n        <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="../../@id" mode="idOrName"/></ci>\r\n      </xsl:element>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'listOfProducts\']/*[local-name()=\'speciesReference\' and @stoichiometry!=\'1\']" mode="diff-eq">\r\n      <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n        <times xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n        <cn xmlns="http://www.w3.org/1998/Math/MathML"><xsl:value-of select="@stoichiometry"/></cn>\r\n        <ci xmlns="http://www.w3.org/1998/Math/MathML"><xsl:apply-templates select="../../@id" mode="idOrName"/></ci>\r\n      </xsl:element>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'listOfReactants\']/*[local-name()=\'speciesReference\' and @stoichiometry!=\'1\']" mode="diff-eq">\r\n      \x3c!--<apply xmlns="http://www.w3.org/1998/Math/MathML">--\x3e\r\n      <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n        <minus xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n        <apply xmlns="http://www.w3.org/1998/Math/MathML">\r\n          <times xmlns="http://www.w3.org/1998/Math/MathML"/>\r\n          <cn xmlns="http://www.w3.org/1998/Math/MathML"><xsl:value-of select="@stoichiometry"/></cn>\r\n          <ci xmlns="http://www.w3.org/1998/Math/MathML"> <xsl:apply-templates select="../../@id" mode="idOrName"/></ci>\r\n        </apply>\r\n      \x3c!--</apply>--\x3e\r\n      </xsl:element>\r\n    </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'rateRule\']" mode="diff-eq">\r\n    <p>\r\n      (<xsl:value-of select="@variable"/>)\' =\r\n      <math xmlns="http://www.w3.org/1998/Math/MathML">\r\n          <xsl:apply-templates select="mml:math/mml:*"/>\r\n      </math>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- events --\x3e\r\n  <xsl:template name="events">\r\n    <div class="sv-container">\r\n      <h2 class="sv-header">Events:</h2>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="//*[local-name()=\'event\']"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'event\']">\r\n    <div class="sv-content">\r\n      When <xsl:apply-templates select="*[local-name()=\'trigger\']/mml:math"/>\r\n      <xsl:if test="*[local-name()=\'delay\']"> after delay <xsl:apply-templates select="*[local-name()=\'delay\']/mml:math"/></xsl:if>\r\n      <xsl:apply-templates select="*[local-name()=\'listOfEventAssignments\']/*[local-name()=\'eventAssignment\']"/>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'eventAssignment\']">\r\n    <p>\r\n      <xsl:if test="key(\'idKey\',@variable)"><xsl:apply-templates select="key(\'idKey\',@variable)/@id" mode="idOrName"/></xsl:if>\r\n      <xsl:if test="not(key(\'idKey\',@variable))"><span class="sv-id-lost"><xsl:value-of select="@variable"/></span></xsl:if>\r\n      &#8592; <xsl:apply-templates select="mml:math"/>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- BEGIN OF mml --\x3e\r\n  \x3c!-- correct for max function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside max --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- correct for min function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside min --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- use id or names for equations and normalize space --\x3e\r\n  <xsl:template match="mml:ci">\r\n    <xsl:element name="ci" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:if test="$useNames=\'true\' and key(\'idKey\',normalize-space(text()))/@name">[<xsl:value-of select="key(\'idKey\',normalize-space(text()))/@name"/>]</xsl:if>\r\n      <xsl:if test="$useNames=\'true\' and not(key(\'idKey\',normalize-space(text()))/@name)">[no name]</xsl:if>\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="normalize-space(text())"/></xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- adaptation of e-notation for MathJax --\x3e\r\n  <xsl:template match="mml:cn[@type=\'e-notation\']">\r\n    <xsl:element name="cn" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:copy-of select="normalize-space(text()[1])"/><xsl:if test="normalize-space(text()[2])!=\'0\'">e<xsl:copy-of select="normalize-space(text()[2])"/>\r\n      </xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- adaptation of integer for MathJax --\x3e\r\n  <xsl:template match="mml:cn[@type=\'integer\']">\r\n    <xsl:element name="cn" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:copy-of select="normalize-space(text())"/>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- just copy mml or not --\x3e\r\n  <xsl:template match="mml:math">\r\n    <xsl:if test="$equationsOff=\'true\'">= Equations are hidden =</xsl:if>\r\n    <xsl:if test="not($equationsOff=\'true\')">\r\n      <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="mml:*">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n</xsl:stylesheet>\r\n'},wA4W:function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\r\n\x3c!--\r\nCopyright 2016-2017 Institute for Systems Biology Moscow\r\n\r\n   Licensed under the Apache License, Version 2.0 (the "License");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an "AS IS" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n--\x3e\r\n\x3c!-- INFO\r\nDescription: Creating representation of whole sbml in table format\r\nmodes:\r\n  - table\r\n  - reactionFormula\r\n  - idOrName\r\n  - unitFormula/unitFormulaScale\r\n  - link/no-link\r\n  - element\r\n\r\nAuthor: Evgeny Metelkin\r\nCopyright: InSysBio LLC, 2016-2018\r\n\r\nProject-page: http://sv.insysbio.com\r\n--\x3e\r\n<xsl:stylesheet version="1.0"\r\n  xmlns="http://www.w3.org/1999/xhtml"\r\n  xmlns:xhtml="http://www.w3.org/1999/xhtml"\r\n  xmlns:l2v1="http://www.sbml.org/sbml/level2"\r\n  xmlns:l2v2="http://www.sbml.org/sbml/level2/version2"\r\n  xmlns:l2v3="http://www.sbml.org/sbml/level2/version3"\r\n  xmlns:l2v4="http://www.sbml.org/sbml/level2/version4"\r\n  xmlns:l2v5="http://www.sbml.org/sbml/level2/version5"\r\n  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"\r\n  xmlns:mml="http://www.w3.org/1998/Math/MathML"\r\n  exclude-result-prefixes="mml xhtml l2v1 l2v2 l2v3 l2v4 l2v5">\r\n\r\n  \x3c!-- GLOBAL KEYS --\x3e\r\n  <xsl:key name="idKey" match="*" use="@id"/>\r\n  <xsl:key name="variableKey" match="*" use="@variable"/>\r\n\r\n  \x3c!-- PARAMETERS --\x3e\r\n  <xsl:param name="useNames">false</xsl:param> \x3c!-- use names instead of id in equations --\x3e\r\n  <xsl:param name="correctMathml">false</xsl:param> \x3c!-- use correction in MathML (for simbio) always on currently--\x3e\r\n  <xsl:param name="equationsOff">false</xsl:param> \x3c!-- do not show equations --\x3e\r\n\r\n  \x3c!-- top --\x3e\r\n  <xsl:template match="/">\r\n    <xsl:apply-templates mode="table"/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- SBML --\x3e\r\n  <xsl:template match="*[local-name()=\'sbml\']" mode="table">\r\n    <div class="sbml-element sbml-sbml sv-container sv-mode-table">\r\n      <h1 class="sv-header">SBML level <xsl:value-of select="@level"/> version <xsl:value-of select="@version"/></h1>\r\n      <div class="sv-content">\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'model\']" mode="table"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- model --\x3e\r\n  <xsl:template match="*[local-name()=\'model\']" mode="table">\r\n    <div class="sbml-element sbml-model sv-container">\r\n      <h2 class="sv-header">Model</h2>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <xsl:apply-templates select="*[contains(local-name(), \'listOf\')]" mode="table"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'annotation\']" mode="element">\r\n    <div class="sbml-element sbml-annotation sv-container">\r\n      <p class="sv-header sbml-element-name">Annotation</p>\r\n      <pre class="sv-content sv-raw-xml prettyprint"><xsl:copy-of select="node()"/></pre>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  \x3c!-- notes --\x3e\r\n  <xsl:template match="*[local-name()=\'notes\']" mode="element">\r\n    <div class="sbml-element sbml-notes sv-container">\r\n      <p class="sv-header sbml-element-name">Notes</p>\r\n      <div class="sv-content sv-xhtml">\r\n        <xsl:copy-of select="node()"/>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n\x3c!--\r\n  <xsl:template match="*[local-name()=\'notes\' and xhtml:body]" mode="element">\r\n   <p><strong>notes:</strong></p>\r\n   <div class="note-content">\r\n    <xsl:copy-of select="xhtml:body/node()"/>\r\n   </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'notes\' and xhtml:html[xhtml:body]]" mode="element">\r\n   <p><strong>notes:</strong></p>\r\n   <div class="note-content">\r\n    <xsl:copy-of select="xhtml:html/xhtml:body/node()"/>\r\n   </div>\r\n  </xsl:template>\r\n--\x3e\r\n\r\n  \x3c!-- @attributes --\x3e\r\n  <xsl:template match="@*" mode="element">\r\n    <p>\r\n      <xsl:attribute name="class">sbml-attribute sbml-<xsl:value-of select="local-name()"/> sv-container</xsl:attribute>\r\n      <span class="sbml-attribute-name"><xsl:value-of select="local-name()"/></span>: <span class="sbml-attribute-value"><xsl:value-of select="."/></span>\r\n    </p>\r\n  </xsl:template>\r\n\r\n  \x3c!-- id --\x3e\r\n  <xsl:template match="@id" mode="link">\r\n    <span class="sbml-attribute-value sbml-id">\r\n      <xsl:attribute name="id"><xsl:value-of select="."/></xsl:attribute>\r\n      <xsl:value-of select="."/>\r\n    </span>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="@id" mode="no-link">\r\n    <span class="sbml-attribute-value sbml-id">\r\n      <xsl:value-of select="."/>\r\n    </span>\r\n  </xsl:template>\r\n\r\n\t\x3c!-- SId object: internal ref --\x3e\r\n  <xsl:template\r\n    match="@species\r\n      |@substanceUnits\r\n      |@units\r\n      |@compartment\r\n      |@speciesType\r\n      |@compartmentType\r\n      |@outside\r\n      |@symbol\r\n      |@variable">\r\n    <xsl:if test="not(key(\'idKey\',.))">\r\n      <span>\r\n        <xsl:attribute name="class">sbml-attribute-value sbml-<xsl:value-of select="local-name()"/> sbml-id-lost</xsl:attribute>\r\n        <xsl:value-of select="."/>\r\n      </span>\r\n    </xsl:if>\r\n\r\n    <xsl:if test="key(\'idKey\',.)">\r\n      <span>\r\n        <xsl:attribute name="class">sbml-attribute-value sbml-<xsl:value-of select="local-name()"/> sbml-id-ref</xsl:attribute>\r\n        <xsl:apply-templates select="key(\'idKey\',.)/@id" mode="idOrName"/>\r\n      </span>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfFunctionDefinitions --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfFunctionDefinitions\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfFunctionDefinitions sv-container">\r\n      <h3 class="sv-header">listOfFunctionDefinitions:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th>math</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'functionDefinition\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'functionDefinition\']" mode="table">\r\n      <tr class="sbml-element sbml-functionDefinition">\r\n        <td><xsl:apply-templates select="@id" mode="no-link"/></td>\r\n        <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n        <td class="sbml-attribute-value sbml-metaid"><xsl:apply-templates select="@metaid" mode="table"/></td>\r\n        <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n      </tr>\r\n      <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n      <tr class="sbml-mixed sv-hidden">\r\n        <td colspan="4">\r\n          <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n          <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        </td>\r\n      </tr>\r\n      </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfUnitDefinitions --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfUnitDefinitions\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfUnitDefinitions sv-container">\r\n      <h3 class="sv-header">listOfUnitDefinitions:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n        <tr>\r\n          <th>id</th>\r\n          <th><xsl:if test="*/@name">name</xsl:if></th>\r\n          <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n          <th>listOfUnits</th>\r\n        </tr>\r\n        <xsl:apply-templates select="*[local-name()=\'unitDefinition\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'unitDefinition\']" mode="table">\r\n      <tr class="sbml-element sbml-unitDefinition">\r\n        <td><xsl:apply-templates select="@id" mode="no-link"/></td>\r\n        <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n        <td class="sbml-attribute-value sbml-metaid"><xsl:apply-templates select="@metaid" mode="table"/></td>\r\n        <td class="sbml-listOf sbml-listOfUnitDefinition"><xsl:apply-templates select="*[local-name()=\'listOfUnits\']" mode="unitFormula"/></td>\r\n      </tr>\r\n      <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n      <tr class="sbml-mixed sv-hidden">\r\n        <td colspan="4">\r\n          <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n          <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        </td>\r\n      </tr>\r\n      </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfCompartmentTypes --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfCompartmentTypes\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfCompartmentTypes sv-container">\r\n      <h3 class="sv-header">listOfCompartmentTypes:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'compartmentType\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'compartmentType\']" mode="table">\r\n    <tr class="sbml-element sbml-compartmentType">\r\n      <td><xsl:apply-templates select="@id" mode="no-link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="3">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfSpeciesTypes --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfSpeciesTypes\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfSpeciesTypes sv-container">\r\n      <h3 class="sv-header">listOfSpeciesTypes:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n        <tr>\r\n          <th>id</th>\r\n          <th><xsl:if test="*/@name">name</xsl:if></th>\r\n          <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n        </tr>\r\n        <xsl:apply-templates select="*[local-name()=\'speciesType\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'speciesType\']" mode="table">\r\n    <tr class="sbml-element sbml-speciesType">\r\n      <td><xsl:apply-templates select="@id" mode="no-link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:apply-templates select="@metaid" mode="table"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="3">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfCompartments --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfCompartments\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfCompartments sv-container">\r\n      <h3 class="sv-header">listOfCompartments:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table class="sv-listof-table">\r\n        <tr>\r\n          <th>id</th>\r\n          <th><xsl:if test="*/@name">name</xsl:if></th>\r\n          <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n          <th><xsl:if test="*/@compartmentType">compartment Type</xsl:if></th>\r\n          <th><xsl:if test="*/@outside">outside</xsl:if></th>\r\n          <th><xsl:if test="*/@units">units</xsl:if></th>\r\n          <th><xsl:if test="*/@size">size</xsl:if></th>\r\n        </tr>\r\n        <xsl:apply-templates select="*[local-name()=\'compartment\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'compartment\']" mode="table">\r\n      <tr class="sbml-element sbml-compartment">\r\n        <td><xsl:apply-templates select="@id" mode="link"/></td>\r\n        <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n        <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n        <td class="sbml-attribute-value sbml-compartment"><xsl:apply-templates select="@compartmentType"/></td>\r\n        <td class="sbml-attribute-value sbml-outside"><xsl:apply-templates select="@outside"/></td>\r\n        <td class="sbml-attribute-value sbml-units"><xsl:apply-templates select="@units"/></td>\r\n        <td class="sbml-attribute-value sbml-size"><xsl:value-of select="@size"/></td>\r\n      </tr>\r\n      <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n      <tr class="sbml-mixed sv-hidden">\r\n        <td colspan="7">\r\n          <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n          <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        </td>\r\n      </tr>\r\n      </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfSpecies --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfSpecies\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfSpecies sv-container">\r\n      <h3 class="sv-header">listOfSpecies:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th><xsl:if test="*/@speciesType">speciesType</xsl:if></th>\r\n            <th><xsl:if test="*/@substanceUnits">substance Units</xsl:if></th>\r\n            <th><xsl:if test="*/@hasOnlySubstanceUnits">hasOnly Substance Units</xsl:if></th>\r\n            <th><xsl:if test="*/@initialConcentration">initial Concentration</xsl:if></th>\r\n            <th><xsl:if test="*/@initialAmount">initial Amount</xsl:if></th>\r\n            <th><xsl:if test="*/@boundaryCondition">boundary Condition</xsl:if></th>\r\n            <th><xsl:if test="*/@compartment">compartment</xsl:if></th>\r\n            <th><xsl:if test="*/@charge">charge</xsl:if></th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'species\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'species\']" mode="table">\r\n    <tr class="sbml-element sbml-species">\r\n      <td><xsl:apply-templates select="@id" mode="link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-attribute-value sbml-speciesType"><xsl:apply-templates select="@speciesType"/></td>\r\n      <td class="sbml-attribute-value sbml-substanceUnits"><xsl:apply-templates select="@substanceUnits"/></td>\r\n      <td class="sbml-attribute-value sbml-hasOnlySubstanceUnits"><xsl:value-of select="@hasOnlySubstanceUnits"/></td>\r\n      <td class="sbml-attribute-value sbml-initialConcentration"><xsl:value-of select="@initialConcentration"/></td>\r\n      <td class="sbml-attribute-value sbml-initialAmount"><xsl:value-of select="@initialAmount"/></td>\r\n      <td class="sbml-attribute-value sbml-boundaryCondition"><xsl:value-of select="@boundaryCondition"/></td>\r\n      <td class="sbml-attribute-value sbml-compartment"><xsl:apply-templates select="@compartment"/></td>\r\n      <td class="sbml-attribute-value sbml-charge"><xsl:value-of select="@charge"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="11">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfParameters --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfParameters\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfParameters sv-container">\r\n      <h3 class="sv-header">listOfParameters:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th><xsl:if test="*/@units">units</xsl:if></th>\r\n            <th><xsl:if test="*/@value">value</xsl:if></th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'parameter\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'parameter\']" mode="table">\r\n    <tr class="sbml-element sbml-parameter">\r\n      <td><xsl:apply-templates select="@id" mode="link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-attribute-value sbml-units"><xsl:apply-templates select="@units"/></td>\r\n      <td class="sbml-attribute-value sbml-value"><xsl:value-of select="@value"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="5">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfInitialAssignments annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfInitialAssignments\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfInitialAssignments sv-container">\r\n      <h3 class="sv-listof-header">listOfInitialAssignments:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>symbol</th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th>math:</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'initialAssignment\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'initialAssignment\']" mode="table">\r\n    <tr class="sbml-element sbml-initialAssignment">\r\n      <td><xsl:apply-templates select="@symbol"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="3">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfConstraints annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfConstraints\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfConstraints sv-container">\r\n      <h3 class="sv-header">listOfConstraints:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n        <tr>\r\n          <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n          <th><xsl:if test="*/*[local-name()=\'message\']">message</xsl:if></th>\r\n          <th>math:</th>\r\n        </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'constraint\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'constraint\']" mode="table">\r\n    <tr class="sbml-element sbml-constraint">\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-element sbml-message"><xsl:apply-templates select="*[local-name()=\'message\']" mode="table"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="3">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfRules annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfRules\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfRules sv-container">\r\n      <h3 class="sv-header">listOfRules:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n        <tr>\r\n    \t    <th>type</th>\r\n          <th>variable</th>\r\n          <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n          <th>math:</th>\r\n        </tr>\r\n        <xsl:apply-templates select="*[local-name()=\'assignmentRule\'] | *[local-name()=\'algebraicRule\'] | *[local-name()=\'rateRule\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'assignmentRule\']\r\n    |*[local-name()=\'algebraicRule\']\r\n    |*[local-name()=\'rateRule\']" mode="table">\r\n    <tr>\r\n      <xsl:attribute name="class">sbml-element sbml-<xsl:value-of select="local-name()"/></xsl:attribute>\r\n      <td><xsl:value-of select="local-name()"/></td>\r\n      <td><xsl:apply-templates select="@variable"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="4">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfReactions annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfReactions\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfReactions sv-container">\r\n      <h3 class="sv-header">listOfReactions:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th>reactants/products:</th>\r\n            <th><xsl:if test="*/*[local-name()=\'listOfModifiers\']">modifiers:</xsl:if></th>\r\n            <th>math:</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'reaction\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'reaction\']" mode="table">\r\n    <tr class="sbml-element sbml-functionDefinition">\r\n      <td><xsl:apply-templates select="@id" mode="link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-mixed"><xsl:apply-templates select="." mode="reactionFormula"/></td>\r\n      <td class="sbml-listOf sbml-listOfModifiers"><xsl:apply-templates select="*[local-name()=\'listOfModifiers\']" mode="reactionFormula"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="*[local-name()=\'kineticLaw\']/mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']|*[local-name()=\'kineticLaw\']/*[local-name()=\'listOfParameters\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="6">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'kineticLaw\']/*[local-name()=\'listOfParameters\']" mode="table"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfEvents annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfEvents\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfEvents sv-container">\r\n      <h3 class="sv-header">listOfEvents:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>id</th>\r\n            <th><xsl:if test="*/@name">name</xsl:if></th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th><xsl:if test="*/@useValuesFromTriggerTime">useValuesFrom TriggerTime</xsl:if></th>\r\n            <th>trigger</th>\r\n            <th>delay</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'event\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'event\']" mode="table">\r\n    <tr class="sbml-element sbml-event">\r\n      <td><xsl:apply-templates select="@id" mode="no-link"/></td>\r\n      <td class="sbml-attribute-value sbml-name"><xsl:value-of select="@name"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-attribute-value sbml-useValuesFromTriggerTime"><xsl:value-of select="@useValuesFromTriggerTime"/></td>\r\n      <td class="sbml-element sbml-trigger sbml-math sv-mml"><xsl:apply-templates select="*[local-name()=\'trigger\']" mode="table"/></td>\r\n      <td class="sbml-element sbml-delay sbml-math sv-mml"><xsl:apply-templates select="*[local-name()=\'delay\']" mode="table"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']\r\n      |./*[local-name()=\'annotation\']\r\n      |*[local-name()=\'listOfEventAssignments\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="6">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'listOfEventAssignments\']" mode="table"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'trigger\']" mode="table">\r\n    <xsl:apply-templates select="mml:math"/>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'delay\']" mode="table">\r\n    <xsl:apply-templates select="mml:math"/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfEventAssignments annotation --\x3e\r\n  <xsl:template match="*[local-name()=\'listOfEventAssignments\']" mode="table">\r\n    <div class="sbml-listOf sbml-listOfEventAssignments sv-container">\r\n      <h3 class="sv-header">listOfEventAssignments:</h3>\r\n      <div class="sbml-mixed sv-content">\r\n        <xsl:apply-templates select="@*" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="*[local-name()=\'annotation\']" mode="element"/>\r\n        <table>\r\n          <tr>\r\n            <th>variable</th>\r\n            <th><xsl:if test="*/@metaid">metaid</xsl:if></th>\r\n            <th>math:</th>\r\n          </tr>\r\n          <xsl:apply-templates select="*[local-name()=\'eventAssignment\']" mode="table"/>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'eventAssignment\']" mode="table">\r\n    <tr class="sbml-element sbml-eventAssignment">\r\n      <td><xsl:apply-templates select="@variable"/></td>\r\n      <td class="sbml-attribute-value sbml-metaid"><xsl:value-of select="@metaid"/></td>\r\n      <td class="sbml-element sbml-math sv-mml"><xsl:apply-templates select="mml:math"/></td>\r\n    </tr>\r\n    <xsl:if test="./*[local-name()=\'notes\']|./*[local-name()=\'annotation\']">\r\n    <tr class="sbml-mixed sv-hidden">\r\n      <td colspan="3">\r\n        <xsl:apply-templates select="./*[local-name()=\'notes\']" mode="element"/>\r\n        <xsl:apply-templates select="./*[local-name()=\'annotation\']" mode="element"/>\r\n      </td>\r\n    </tr>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="*[local-name()=\'unitDefinition\']/@name" mode="table">\r\n    <xsl:value-of select="."/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- message type: just copy --\x3e\r\n  <xsl:template match="*[local-name()=\'message\']" mode="table">\r\n    <xsl:copy-of select="node()"/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- do nothing if nothing to output--\x3e\r\n  <xsl:template match="*" mode="table">\r\n    = missing in xslt: <xsl:value-of select="local-name()"/>=\r\n  </xsl:template>\r\n\r\n\x3c!-- END OF table mode --\x3e\r\n\r\n\x3c!-- BEGIN OF unitFormula/unitFormulaScale mode --\x3e\r\n    <xsl:template match="l2v2:listOfUnits\r\n      | l2v3:listOfUnits\r\n      | l2v4:listOfUnits\r\n      | l2v5:listOfUnits" mode="unitFormula">\r\n      <xsl:apply-templates select="*[local-name()=\'unit\']" mode="unitFormula"/>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'unit\' and @exponent!=\'1\']" mode="unitFormula">\r\n        (<xsl:if test="@multiplier!=\'1\'"><xsl:value-of select="@multiplier"/>&#8901;</xsl:if><xsl:if test="@scale!=\'0\'">10<sup><xsl:value-of select="@scale"/></sup></xsl:if><xsl:value-of select="@kind"/>)\r\n        <sup><xsl:value-of select="@exponent"/></sup>\r\n    </xsl:template>\r\n\r\n    <xsl:template match="*[local-name()=\'unit\' and not(@exponent!=\'1\')]" mode="unitFormula">\r\n          (<xsl:if test="@multiplier!=\'1\'"><xsl:value-of select="@multiplier"/>&#8901;</xsl:if><xsl:if test="@scale!=\'0\'">10<sup><xsl:value-of select="@scale"/></sup></xsl:if><xsl:value-of select="@kind"/>)\r\n    </xsl:template>\r\n\r\n    <xsl:template match="l2v1:listOfUnits" mode="unitFormula">\r\n      <span class="error">= not supported for l2v1 =</span>\r\n    </xsl:template>\r\n\x3c!-- END OF unitFormula/unitFormulaScale mode --\x3e\r\n\r\n\x3c!-- BEGIN OF idOrName mode --\x3e\r\n  <xsl:template match="@id" mode="idOrName">\r\n      <xsl:if test="$useNames=\'true\' and count(./../@name)>0">[<xsl:value-of select="./../@name"/>]</xsl:if>  \x3c!-- for simbio only--\x3e\r\n      <xsl:if test="$useNames=\'true\' and count(./../@name)=0">[no name]</xsl:if>\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="."/></xsl:if>\r\n  </xsl:template>\r\n\x3c!-- END OF idOrName mode --\x3e\r\n\r\n\x3c!-- BEGIN OF reactionFormula mode --\x3e\r\n  <xsl:template match="*[local-name()=\'reaction\']" mode="reactionFormula">\r\n    <xsl:if test="count(*[local-name()=\'listOfReactants\']/*[local-name()=\'speciesReference\'])=0">&#8709;</xsl:if>\r\n    <xsl:apply-templates select="*[local-name()=\'listOfReactants\']" mode="reactionFormula"/>\r\n    <xsl:if test="@reversible=\'false\' and @fast=\'true\'"> &#8594; </xsl:if>\r\n    <xsl:if test="not(@reversible=\'false\') and @fast=\'true\'"> &#8596; </xsl:if>\r\n    <xsl:if test="@reversible=\'false\' and not(@fast=\'true\')"> &#8658; </xsl:if>\r\n    <xsl:if test="not(@reversible=\'false\') and not(@fast=\'true\')"> &#8660; </xsl:if>\r\n    <xsl:if test="count(*[local-name()=\'listOfProducts\']/*[local-name()=\'speciesReference\'])=0">&#8709;</xsl:if>\r\n    <xsl:apply-templates select="*[local-name()=\'listOfProducts\']" mode="reactionFormula"/>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfReactants / listOfProducts--\x3e\r\n  <xsl:template match="*[local-name()=\'listOfReactants\']\r\n    | *[local-name()=\'listOfProducts\']" mode="reactionFormula">\r\n    <xsl:for-each select="*[local-name()=\'speciesReference\']">\r\n      <xsl:if test="@stoichiometry!=\'1\'"><xsl:value-of select="@stoichiometry"/>&#215;</xsl:if>\r\n\t  <xsl:apply-templates select="@species"/>\r\n      <xsl:if test="position()!=last()"> + </xsl:if>\r\n    </xsl:for-each>\r\n  </xsl:template>\r\n\r\n  \x3c!-- listOfModifiers--\x3e\r\n  <xsl:template match="*[local-name()=\'listOfModifiers\']" mode="reactionFormula">\r\n    <xsl:for-each select="*[local-name()=\'modifierSpeciesReference\']">\r\n\t  <xsl:apply-templates select="@species"/>\r\n      <xsl:if test="position()!=last()">; </xsl:if>\r\n    </xsl:for-each>\r\n  </xsl:template>\r\n\x3c!-- END OF reactionFormula mode --\x3e\r\n\r\n\x3c!-- BEGIN OF mml: part, =TO DO= include $correctMathml switcher, correction of SimBiology specific functions --\x3e\r\n  \x3c!-- correct for max function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside max --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'max\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="max" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- correct for min function --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:ci]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- exclude vertcat inside min --\x3e\r\n  <xsl:template match="mml:apply[*[1][self::mml:ci][normalize-space(text())=\'min\'][following-sibling::mml:apply]]">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:element name="min" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n      <xsl:apply-templates select="*[2]/*[position()&gt;1]"/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  \x3c!-- use id or names for equations and normalize space --\x3e\r\n  <xsl:template match="mml:ci">\r\n    <xsl:element name="ci" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:if test="$useNames=\'true\' and key(\'idKey\',normalize-space(text()))/@name">[<xsl:value-of select="key(\'idKey\',normalize-space(text()))/@name"/>]</xsl:if>\r\n      <xsl:if test="$useNames=\'true\' and not(key(\'idKey\',normalize-space(text()))/@name)">[no name]</xsl:if>\r\n      <xsl:if test="not($useNames=\'true\')"><xsl:value-of select="normalize-space(text())"/></xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- adaptation of e-notation for MathJax --\x3e\r\n  <xsl:template match="mml:cn[@type=\'e-notation\']">\r\n    <xsl:element name="cn" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:copy-of select="normalize-space(text()[1])"/><xsl:if test="normalize-space(text()[2])!=\'0\'">e<xsl:copy-of select="normalize-space(text()[2])"/>\r\n      </xsl:if>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- adaptation of integer for MathJax --\x3e\r\n  <xsl:template match="mml:cn[@type=\'integer\']">\r\n    <xsl:element name="cn" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:copy-of select="normalize-space(text())"/>\r\n    </xsl:element>\r\n  </xsl:template>\r\n\r\n  \x3c!-- just copy mml or not --\x3e\r\n  <xsl:template match="mml:math">\r\n    <xsl:if test="$equationsOff=\'true\'"><span class="sv-hidden">Equations are hidden</span></xsl:if>\r\n    <xsl:if test="not($equationsOff=\'true\')">\r\n      <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n    </xsl:if>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="mml:*">\r\n    <xsl:copy>\r\n      <xsl:copy-of select="@*"/>\r\n      <xsl:apply-templates/>\r\n    </xsl:copy>\r\n  </xsl:template>\r\n\r\n  <xsl:template match="mml:lambda">\r\n   <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n    <xsl:element name="equivalent" namespace="http://www.w3.org/1998/Math/MathML"/>\r\n    <xsl:element name="apply" namespace="http://www.w3.org/1998/Math/MathML">\r\n      <xsl:element name="ci" namespace="http://www.w3.org/1998/Math/MathML">f</xsl:element>\r\n      <xsl:copy-of select="mml:bvar/mml:*"/>\r\n    </xsl:element>\r\n    <xsl:copy-of select="*[local-name()!=\'bvar\']"/>\r\n\r\n   </xsl:element>\r\n  </xsl:template>\r\n\x3c!-- END OF mml: part --\x3e\r\n</xsl:stylesheet>\r\n'},wpwt:function(e,t){},ys3j:function(e,t){e.exports={"Incorrect XML":{message:"Unclear problems with file"},"Incorrect level":{message:"Unsupported file content"},"Fail import stylesheet":{message:"XSLT problems"},"Fail transform document":{message:"Fail when transforming document"},"Can not read file":{message:"Can not read file"}}},zO55:function(e,t){}},["NHnr"]);